"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8541],{94652:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var o=t(57437),i=t(2265),r=t(42382),a=t(68340),s=t(64703),l=t(42386),c=t(83310),d=t(11814),u=t(77639),p=t(47198),h=t(3905),f=t(98833),m=t(57354);let g=(0,p.observer)(function({connectionType:e,model:n,session:t}){let r=e.configEditorComponent||m.w;return(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)(f.LoadingEllipses,{}),children:(0,o.jsx)(r,{model:{target:n},session:t})})});var C=t(31835),y=t(95280);let v=(0,p.observer)(function({connectionTypeChoices:e,connectionType:n,setConnectionType:t}){let r=e[0];return(0,i.useEffect)(()=>{n||t(r)},[n,r,t]),(0,o.jsx)("form",{autoComplete:"off",children:n?(0,o.jsx)(C.Z,{value:n.name,label:"connectionType",helperText:n.description?(0,o.jsxs)(o.Fragment,{children:[n.description,n.url?(0,o.jsx)(f.ExternalLink,{href:n.url}):null]}):null,select:!0,fullWidth:!0,onChange:n=>{t(e.find(e=>e.name===n.target.value))},variant:"outlined",children:e.map(e=>(0,o.jsx)(y.Z,{value:e.name,children:e.displayName||e.name},e.name))}):null})}),x=(0,h.makeStyles)()(e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}})),w=["Select a Connection Type","Configure Connection"];var j=(0,p.observer)(function({model:e}){let[n,t]=(0,i.useState)(),[p,h]=(0,i.useState)(),[f,m]=(0,i.useState)(0),{classes:C}=x(),y=(0,r.getSession)(e),{pluginManager:j}=(0,r.getEnv)(y),b=(0,i.useMemo)(()=>null==n?void 0:n.configSchema.create({connectionId:p},(0,r.getEnv)(e)),[p,n,e]);return(0,o.jsx)("div",{className:C.root,children:(0,o.jsx)(s.Z,{className:C.stepper,activeStep:f,orientation:"vertical",children:w.map(i=>(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(c.Z,{children:i}),(0,o.jsxs)(d.Z,{children:[0===f?(0,o.jsx)(v,{connectionTypeChoices:j.getConnectionElements(),connectionType:n,setConnectionType:e=>{t(e),e&&h(`${e.name}-${Date.now()}`)}}):n&&b?(0,o.jsx)(g,{connectionType:n,model:b,session:y}):null,(0,o.jsxs)("div",{className:C.actionsContainer,children:[(0,o.jsx)(u.Z,{disabled:0===f,onClick:()=>{m(f-1)},className:C.button,children:"Back"}),(0,o.jsx)(u.Z,{disabled:!(0===f&&n||1===f&&b),variant:"contained",color:"primary",onClick:()=>{if(f===w.length-1){if(b&&(0,a.n)(y)){let e=y.addConnectionConf(b);y.makeConnection(e)}else y.notify("No config model to add");(0,r.isSessionModelWithWidgets)(y)&&y.hideWidget(e)}else m(f+1)},className:C.button,"data-testid":"addConnectionNext",children:f===w.length-1?"Connect":"Next"})]})]})]},i))})})})},68340:function(e,n,t){t.d(n,{C:function(){return a},n:function(){return s}});var o=t(87290);if(2272==t.j)var i=t(91904);var r=t(47060);function a(e){return i.types.model({connectionInstances:i.types.array(e.pluggableMstType("connection","stateModel"))}).views(e=>({get connections(){let{jbrowse:n}=e;return n.connections}})).actions(n=>({makeConnection(t,i={}){let r=t.type;if(!r)throw Error("track configuration has no `type` listed");let a=(0,o.readConfObject)(t,"name");if(!e.getConnectionType(r))throw Error(`unknown connection type ${r}`);let s=n.connectionInstances.push({...i,name:a,type:r,configuration:t});return n.connectionInstances[s-1]},prepareToBreakConnection(e){let t=[],i={},r=(0,o.readConfObject)(e,"name"),a=n.connectionInstances.find(e=>e.name===r);if(a){for(let e of a.tracks){let o=n.getReferring(e);n.removeReferring(o,e,t,i)}return[()=>{for(let e of t)e();this.breakConnection(e)},i]}},breakConnection(e){let t=(0,o.readConfObject)(e,"name"),i=n.connectionInstances.find(e=>e.name===t);if(!i)throw Error(`no connection found with name ${t}`);n.connectionInstances.remove(i)},deleteConnection(e){let{jbrowse:t}=n;return t.deleteConnectionConf(e)},addConnectionConf(e){let{jbrowse:t}=n;return t.addConnectionConf(e)},clearConnections(){n.connectionInstances.clear()}}))}function s(e){return(0,r.N_)(e)&&"connectionInstances"in e}},19702:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(2265),i=t(61994),r=t(64634),a=t(19663),s=t(7609),l=t(1589),c=t(25122),d=t(1190),u=t(42318),p=t(84844),h=t(28868),f=t(3608),m=t(15245),g=t(95916);function C(e){return(0,g.ZP)("MuiCollapse",e)}(0,m.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var y=t(57437);let v=e=>{let{orientation:n,classes:t}=e;return(0,s.Z)({root:["root","".concat(n)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(n)],wrapperInner:["wrapperInner","".concat(n)]},C,t)},x=(0,l.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,n[t.orientation],"entered"===t.state&&n.entered,"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&n.hidden]}})((0,d.Z)(e=>{let{theme:n}=e;return{height:0,overflow:"hidden",transition:n.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:n.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:n}=e;return"exited"===n.state&&!n.in&&"0px"===n.collapsedSize},style:{visibility:"hidden"}}]}})),w=(0,l.ZP)("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),j=(0,l.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),b=o.forwardRef(function(e,n){let t=(0,u.i)({props:e,name:"MuiCollapse"}),{addEndListener:s,children:l,className:d,collapsedSize:m="0px",component:g,easing:C,in:b,onEnter:Z,onEntered:k,onEntering:E,onExit:S,onExited:N,onExiting:T,orientation:I="vertical",style:z,timeout:M=p.x9.standard,TransitionComponent:R=r.ZP,...W}=t,D={...t,orientation:I,collapsedSize:m},P=v(D),_=(0,c.Z)(),H=(0,a.Z)(),$=o.useRef(null),A=o.useRef(),B="number"==typeof m?"".concat(m,"px"):m,F="horizontal"===I,L=F?"width":"height",O=o.useRef(null),q=(0,f.Z)(n,O),G=e=>n=>{if(e){let t=O.current;void 0===n?e(t):e(t,n)}},J=()=>$.current?$.current[F?"clientWidth":"clientHeight"]:0,K=G((e,n)=>{$.current&&F&&($.current.style.position="absolute"),e.style[L]=B,Z&&Z(e,n)}),Q=G((e,n)=>{let t=J();$.current&&F&&($.current.style.position="");let{duration:o,easing:i}=(0,h.C)({style:z,timeout:M,easing:C},{mode:"enter"});if("auto"===M){let n=_.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),A.current=n}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style[L]="".concat(t,"px"),e.style.transitionTimingFunction=i,E&&E(e,n)}),U=G((e,n)=>{e.style[L]="auto",k&&k(e,n)}),V=G(e=>{e.style[L]="".concat(J(),"px"),S&&S(e)}),X=G(N),Y=G(e=>{let n=J(),{duration:t,easing:o}=(0,h.C)({style:z,timeout:M,easing:C},{mode:"exit"});if("auto"===M){let t=_.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),A.current=t}else e.style.transitionDuration="string"==typeof t?t:"".concat(t,"ms");e.style[L]=B,e.style.transitionTimingFunction=o,T&&T(e)});return(0,y.jsx)(R,{in:b,onEnter:K,onEntered:U,onEntering:Q,onExit:V,onExited:X,onExiting:Y,addEndListener:e=>{"auto"===M&&H.start(A.current||0,e),s&&s(O.current,e)},nodeRef:O,timeout:"auto"===M?null:M,...W,children:(e,n)=>{let{ownerState:t,...o}=n;return(0,y.jsx)(x,{as:g,className:(0,i.Z)(P.root,d,{entered:P.entered,exited:!b&&"0px"===B&&P.hidden}[e]),style:{[F?"minWidth":"minHeight"]:B,...z},ref:q,ownerState:{...D,state:e},...o,children:(0,y.jsx)(w,{ownerState:{...D,state:e},className:P.wrapper,ref:$,children:(0,y.jsx)(j,{ownerState:{...D,state:e},className:P.wrapperInner,children:l})})})}})});b&&(b.muiSupportAuto=!0);var Z=b}}]);