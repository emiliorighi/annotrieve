"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8913],{8913:function(e,t,a){a.r(t);var r=a(77207),n=a(42382),i=a(52427),s=a(47368),l=a(47358),o=a(15097);class c extends r.BaseFeatureDataAdapter{constructor(){super(...arguments),this.gcMode="content"}async configure(){var e;let t=await (null===(e=this.getSubAdapter)||void 0===e?void 0:e.call(this,this.getConf("sequenceAdapter")));if(!t)throw Error("Error getting subadapter");return t.dataAdapter}async getRefNames(e){return(await this.configure()).getRefNames(e)}getFeatures(e,t){let{statusCallback:a=()=>{},stopToken:r}=t||{};return(0,i.ObservableCreate)(async i=>{var c;let u=await this.configure(),f=this.getConf("windowSize"),h=this.getConf("windowDelta"),g=1===f?1:Math.ceil(f/2),d=1===f,p=Math.max(0,Math.floor((e.start-g)/f)*f),w=Math.ceil((e.end+g)/f)*f;if(w<0||p>w){i.complete();return}let m=(null===(c=(await (0,l.z)(u.getFeatures({...e,start:p,end:w},t).pipe((0,o.q)())))[0])||void 0===c?void 0:c.get("seq"))||"";await (0,n.updateStatus)("Calculating GC",a,()=>{let t=0,a=0,l=0,o=performance.now();for(let e=g-g;e<g+g;e++){let r=m[e];"c"===r||"C"===r?t++:("g"===r||"G"===r)&&a++,"N"!==r&&l++}for(let c=g;c<m.length-g;c+=h){if(performance.now()-o>400&&((0,s.checkStopToken)(r),o=performance.now()),d){let e=m[c];t="c"===e||"C"===e?1:0,a="g"===e||"G"===e?1:0,l="N"!==e?1:0}else if(c>g){let e=c-h-g,r=c-h+g,n=c-g,i=c+g;for(let i=e;i<Math.min(r,n);i++)if(i>=0&&i<m.length){let e=m[i];"c"===e||"C"===e?t--:("g"===e||"G"===e)&&a--,"N"!==e&&l--}for(let e=Math.max(r,n);e<i;e++)if(e>=0&&e<m.length){let r=m[e];"c"===r||"C"===r?t++:("g"===r||"G"===r)&&a++,"N"!==r&&l++}}let u="content"===this.gcMode?(a+t)/(l||1):"skew"===this.gcMode?(a-t)/(a+t||1):0;i.next(new n.SimpleFeature({uniqueId:`${this.id}_${p+c}`,refName:e.refName,start:p+c,end:p+c+h,score:u}))}}),i.complete()})}}c.capabilities=["hasLocalStats"],t.default=c}}]);