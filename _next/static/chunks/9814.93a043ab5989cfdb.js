"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9814],{93900:function(e,t,r){r.d(t,{Z:function(){return s}});class i{}class n{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new i){if(this.signal.aborted)throw Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class a{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),this.currentMessage&&e(this.currentMessage)}callback(e){for(let t of(this.currentMessage=e,this.callbacks))t(e)}}class s{constructor({fill:e,cache:t}){if("function"!=typeof e)throw TypeError("must pass a fill function");if("object"!=typeof t)throw TypeError("must pass a cache object");if("function"!=typeof t.get||"function"!=typeof t.set||"function"!=typeof t.delete)throw TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,r,i){let s=new n,o=new a;o.addCallback(i);let l={aborter:s,promise:this.fillCallback(t,s.signal,e=>{o.callback(e)}),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};l.aborter.addSignal(r),l.aborter.signal.addEventListener("abort",()=>{l.settled||this.evict(e,l)}),l.promise.then(()=>{l.settled=!0},()=>{l.settled=!0,this.evict(e,l)}).catch(e=>{throw console.error(e),e}),this.cache.set(e,l)}static checkSinglePromise(e,t){function r(){if(t?.aborted)throw Object.assign(Error("aborted"),{code:"ERR_ABORTED"})}return e.then(e=>(r(),e),e=>{throw r(),e})}has(e){return this.cache.has(e)}get(e,t,r,i){if(!r&&t instanceof AbortSignal)throw TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");let n=this.cache.get(e);return n?n.aborted&&!n.settled?(this.evict(e,n),this.get(e,t,r,i)):n.settled?n.promise:(n.aborter.addSignal(r),n.statusReporter.addCallback(i),s.checkSinglePromise(n.promise,r)):(this.fill(e,t,r,i),s.checkSinglePromise(this.cache.get(e).promise,r))}delete(e){let t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){let e=this.cache.keys(),t=0;for(let r=e.next();!r.done;r=e.next())this.delete(r.value),t+=1;return t}}},37519:function(e,t,r){function i(e,t=0){let r=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;return((e[t+4]|e[t+5]<<8|e[t+6]<<16|e[t+7]<<24)>>>0)*4294967296+(r>>>0)}function n(e,t,r){let i=t[1],n=r?r[1]:1/0;return i<=e&&n>e?0:i<e?-1:1}r.d(t,{q5:function(){return d},Ri:function(){return h},y$:function(){return c}});class a{constructor({filehandle:e}){this.filehandle=e}_getIndex(){return this.index||(this.index=this._readIndex().catch(e=>{throw this.index=void 0,e})),this.index}async _readIndex(){let e=i(await this.filehandle.read(8,0));if(!e)return[[0,0]];let t=Array(e+1);t[0]=[0,0];let r=16*e;if(r>Number.MAX_SAFE_INTEGER)throw TypeError("integer overflow");let n=await this.filehandle.read(r,8);for(let r=0;r<e;r+=1){let e=i(n,16*r),a=i(n,16*r+8);t[r+1]=[e,a]}return t}async getLastBlock(){return(await this._getIndex()).at(-1)}async getRelevantBlocksForRead(e,t){let r=t+e;if(0===e)return[];let i=await this._getIndex(),a=[],s=0,o=i.length-1,l=Math.floor(i.length/2),h=n(t,i[l],i[l+1]);for(;0!==h;)h>0?o=l-1:h<0&&(s=l+1),h=n(t,i[l=Math.ceil((o-s)/2)+s],i[l+1]);a.push(i[l]);let c=l+1;for(;c<i.length&&(a.push(i[c]),!(i[c][1]>=r));c+=1);return a[a.length-1][1]<r&&a.push([]),a}}function s(e){let t=new Uint8Array(function(e){let t=0;for(let r of e)t+=r.length;return t}(e)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}let{Z_SYNC_FLUSH:o,Inflate:l}=r(63624);async function h(e){try{let t,r;let i=0,n=[];do{let a=e.subarray(i);if(r=new l,{strm:t}=r,r.push(a,o),r.err)throw Error(r.msg);i+=t.next_in,n.push(r.result)}while(t.avail_in);return s(n)}catch(e){if(/incorrect header check/.exec(`${e}`))throw Error("problem decompressing block: incorrect gzip header check");throw e}}async function c(e,t,r){try{let i;let{minv:n,maxv:a}=t,h=n.blockPosition,c=n.dataPosition,d=[],f=[],u=[],g=0,b=!1;do{let t,s;let m=e.subarray(h-n.blockPosition),p=function(e,t){let r=t.subarray(0,Math.min(32,t.length)),i=0,n=r.length;for(let e=0;e<n;e++)i=(i<<5)-i+r[e]&4294967295;return`${e}_${i}`}(h,m),w=r?.get(p);if(w)t=w.buffer,s=w.nextIn,b=!0;else{let e=new l;if({strm:i}=e,e.push(m,o),e.err)throw Error(e.msg);t=e.result,s=i.next_in,b=!1,r?.set(p,{buffer:t,nextIn:s})}d.push(t);let x=t.length;f.push(h),u.push(c),1===d.length&&n.dataPosition&&(d[0]=d[0].subarray(n.dataPosition),x=d[0].length);let y=h;if(h+=s,c+=x,y>=a.blockPosition){d[g]=d[g].subarray(0,a.blockPosition===n.blockPosition?a.dataPosition-n.dataPosition+1:a.dataPosition+1),f.push(h),u.push(c);break}g++}while(b?h<e.length+n.blockPosition:i.avail_in);return{buffer:s(d),cpositions:f,dpositions:u}}catch(e){if(/incorrect header check/.exec(`${e}`))throw Error("problem decompressing block: incorrect gzip header check");throw e}}class d{constructor({filehandle:e,gziFilehandle:t}){this.filehandle=e,this.gzi=new a({filehandle:t})}async _readAndUncompressBlock(e,t){let r=t;r||(r=(await this.filehandle.stat()).size);let i=r-e;return h(await this.filehandle.read(i,e))}async read(e,t){let r=await this.gzi.getRelevantBlocksForRead(e,t),i=[];for(let n=0;n<r.length-1;n+=1){let a=await this._readAndUncompressBlock(r[n][0],r[n+1][0]),[,s]=r[n],o=s>=t?0:t-s,l=Math.min(t+e,s+a.length)-s;o>=0&&o<a.length&&i.push(a.subarray(o,l))}return s(i)}}},19814:function(e,t,r){r.d(t,{pC:function(){return y}});var i=r(93900),n=r(37519),a=r(3549),s=r(9762),o=r(51936);class l{constructor(e,t,r,i){this.minv=e,this.maxv=t,this.bin=r,this._fetchedSize=i}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class h{constructor({filehandle:e,renameRefSeqs:t=e=>e}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){let{indices:t,...r}=await this.parse(e);return r}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch(e=>{throw this.parseP=void 0,e})),this.parseP}async hasRefSeq(e,t={}){let r=await this.parse(t);return!!r.indices[e]?.binIndex}}function c(e,t=0){let r=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;return((e[t+4]|e[t+5]<<8|e[t+6]<<16|e[t+7]<<24)>>>0)*4294967296+(r>>>0)}class d extends Error{}function f(e){if(e&&e.aborted){if("undefined"!=typeof DOMException)throw new DOMException("aborted","AbortError");{let e=new d("aborted");throw e.code="ERR_ABORTED",e}}}function u(e,t){let r=[],i=null;return 0===e.length?e:(e.sort(function(e,t){let r=e.minv.blockPosition-t.minv.blockPosition;return 0!==r?r:e.minv.dataPosition-t.minv.dataPosition}),e.forEach(e=>{if(!t||e.maxv.compareTo(t)>0){if(null===i)r.push(e),i=e;else{var n;(n=i,e.minv.blockPosition-n.maxv.blockPosition<65e3&&e.maxv.blockPosition-n.minv.blockPosition<5e6)?e.maxv.compareTo(i.maxv)>0&&(i.maxv=e.maxv):(r.push(e),i=e)}}}),r)}class g{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}function b(e,t=0){return new g(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}let m={0:"generic",1:"SAM",2:"VCF"};function p(e,t){return Math.floor(e/2**t)}class w extends h{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){let r=await this.parse(t),i=r.refNameToId[e];if(void 0===i||!r.indices[i])return -1;let{stats:n}=r.indices[i];return n?n.lineCount:-1}indexCov(){throw Error("CSI indexes do not support indexcov")}parseAuxData(e,t){let r=new DataView(e.buffer),i=r.getInt32(t,!0),n=m[15&i];if(!n)throw Error(`invalid Tabix preset format flags ${i}`);let a={ref:r.getInt32(t+4,!0),start:r.getInt32(t+8,!0),end:r.getInt32(t+12,!0)},s=r.getInt32(t+16,!0),o=s?String.fromCharCode(s):null,l=r.getInt32(t+20,!0),h=r.getInt32(t+24,!0),{refIdToName:c,refNameToId:d}=this._parseNameBytes(e.subarray(t+28,t+28+h));return{refIdToName:c,refNameToId:d,skipLines:l,metaChar:o,columnNumbers:a,format:n,coordinateType:65536&i?"zero-based-half-open":"1-based-closed"}}_parseNameBytes(e){let t=0,r=0,i=[],n={},a=new TextDecoder("utf8");for(let s=0;s<e.length;s+=1)if(!e[s]){if(r<s){let o=this.renameRefSeq(a.decode(e.subarray(r,s)));i[t]=o,n[o]=t}r=s+1,t+=1}return{refNameToId:n,refIdToName:i}}async _parse(e={}){let t,r;let i=await (0,n.Ri)(await this.filehandle.readFile(e)),a=new DataView(i.buffer);if(21582659===a.getUint32(0,!0))t=1;else if(38359875===a.getUint32(0,!0))t=2;else throw Error("Not a CSI file");this.minShift=a.getInt32(4,!0),this.depth=a.getInt32(8,!0),this.maxBinNumber=((1<<(this.depth+1)*3)-1)/7;let s=2**(this.minShift+3*this.depth),o=a.getInt32(12,!0),h=o&&o>=30?this.parseAuxData(i,16):{refIdToName:[],refNameToId:{},metaChar:null,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},c=a.getInt32(16+o,!0),d=16+o+4,f=Array(c).fill(0).map(()=>{let e;let t=a.getInt32(d,!0);d+=4;let n={};for(let s=0;s<t;s+=1){let t=a.getUint32(d,!0);if(t>this.maxBinNumber)e=this.parsePseudoBin(i,d+4),d+=48;else{let e=b(i,d+4);r=this._findFirstData(r,e);let s=a.getInt32(d+12,!0);d+=16;let o=Array(s);for(let e=0;e<s;e+=1){let r=b(i,d),n=b(i,d+8);d+=16,o[e]=new l(r,n,t)}n[t]=o}}return{binIndex:n,stats:e}});return{...h,csi:!0,refCount:c,maxBlockSize:65536,firstDataLine:r,csiVersion:t,indices:f,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:s}}parsePseudoBin(e,t){return{lineCount:c(e,t+28)}}async blocksForRange(e,t,r,i={}){t<0&&(t=0);let n=await this.parse(i),a=n.refNameToId[e];if(void 0===a)return[];let s=n.indices[a];if(!s)return[];let o=this.reg2bins(t,r),h=[];for(let[e,t]of o)for(let r=e;r<=t;r++)if(s.binIndex[r])for(let e of s.binIndex[r])h.push(new l(e.minv,e.maxv,r));return u(h,new g(0,0))}reg2bins(e,t){(e-=1)<1&&(e=1),t>0x4000000000000&&(t=17179869184),t-=1;let r=0,i=0,n=this.minShift+3*this.depth,a=[];for(;r<=this.depth;n-=3,i+=1*2**(3*r),r+=1){let r=i+p(e,n),s=i+p(t,n);if(s-r+a.length>this.maxBinNumber)throw Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);a.push([r,s])}return a}}class x extends h{async lineCount(e,t={}){let r=await this.parse(t),i=r.refNameToId[e];return void 0!==i&&r.indices[i]?r.indices[i].stats?.lineCount??-1:-1}async _parse(e={}){let t;let r=await this.filehandle.readFile(e),i=await (0,n.Ri)(r);f(e.signal);let a=new DataView(i.buffer);if(21578324!==a.getUint32(0,!0))throw Error("Not a TBI file");let s=a.getUint32(4,!0),o=a.getUint32(8,!0),h={0:"generic",1:"SAM",2:"VCF"}[15&o];if(!h)throw Error(`invalid Tabix preset format flags ${o}`);let c={ref:a.getInt32(12,!0),start:a.getInt32(16,!0),end:a.getInt32(20,!0)},d=a.getInt32(24,!0),u=d?String.fromCharCode(d):null,g=a.getInt32(28,!0),m=a.getInt32(32,!0),{refNameToId:p,refIdToName:w}=this._parseNameBytes(i.slice(36,36+m)),x=36+m;return{indices:Array(s).fill(0).map(()=>{let e;let r=a.getInt32(x,!0);x+=4;let n={};for(let s=0;s<r;s+=1){let r=a.getUint32(x,!0);if(x+=4,r>37450)throw Error("tabix index contains too many bins, please use a CSI index");if(37450===r){let t=a.getInt32(x,!0);x+=4,2===t&&(e=this.parsePseudoBin(i,x)),x+=16*t}else{let e=a.getInt32(x,!0);x+=4;let s=Array(e);for(let n=0;n<e;n+=1){let e=b(i,x),a=b(i,x+8);x+=16,t=this._findFirstData(t,e),s[n]=new l(e,a,r)}n[r]=s}}let s=a.getInt32(x,!0);x+=4;let o=Array(s);for(let e=0;e<s;e+=1)o[e]=b(i,x),x+=8,t=this._findFirstData(t,o[e]);return{binIndex:n,linearIndex:o,stats:e}}),metaChar:u,maxBinNumber:37449,maxRefLength:536870912,skipLines:g,firstDataLine:t,columnNumbers:c,coordinateType:65536&o?"zero-based-half-open":"1-based-closed",format:h,refIdToName:w,refNameToId:p,maxBlockSize:65536}}parsePseudoBin(e,t){return{lineCount:c(e,t+16)}}_parseNameBytes(e){let t=0,r=0,i=[],n={},a=new TextDecoder("utf8");for(let s=0;s<e.length;s+=1)if(!e[s]){if(r<s){let o=this.renameRefSeq(a.decode(e.subarray(r,s)));i[t]=o,n[o]=t}r=s+1,t+=1}return{refNameToId:n,refIdToName:i}}async blocksForRange(e,t,r,i={}){var n,a;t<0&&(t=0);let s=await this.parse(i),o=s.refNameToId[e];if(void 0===o)return[];let h=s.indices[o];if(!h)return[];(h.linearIndex.length?h.linearIndex[t>>14>=h.linearIndex.length?h.linearIndex.length-1:t>>14]:new g(0,0))||console.warn("querying outside of possible tabix range");let c=[[0,0],[1+((n=t+1)>>26),1+((a=r-1)>>26)],[9+(n>>23),9+(a>>23)],[73+(n>>20),73+(a>>20)],[585+(n>>17),585+(a>>17)],[4681+(n>>14),4681+(a>>14)]],d=[];for(let[e,t]of c)for(let r=e;r<=t;r++)if(h.binIndex[r])for(let e of h.binIndex[r])d.push(new l(e.minv,e.maxv,r));let f=h.linearIndex.length,b=null,m=Math.min(t>>14,f-1),p=Math.min(r>>14,f-1);for(let e=m;e<=p;++e){let t=h.linearIndex[e];t&&(!b||0>t.compareTo(b))&&(b=t)}return u(d,b)}}class y{constructor({path:e,filehandle:t,url:r,tbiPath:n,tbiUrl:l,tbiFilehandle:h,csiPath:c,csiUrl:d,csiFilehandle:f,renameRefSeqs:u=e=>e,chunkCacheSize:g=5242880}){if(t)this.filehandle=t;else if(e)this.filehandle=new a.S9(e);else if(r)this.filehandle=new s.Z(r);else throw TypeError("must provide either filehandle or path");if(h)this.index=new x({filehandle:h,renameRefSeqs:u});else if(f)this.index=new w({filehandle:f,renameRefSeqs:u});else if(n)this.index=new x({filehandle:new a.S9(n),renameRefSeqs:u});else if(c)this.index=new w({filehandle:new a.S9(c),renameRefSeqs:u});else if(e)this.index=new x({filehandle:new a.S9(`${e}.tbi`),renameRefSeqs:u});else if(d)this.index=new w({filehandle:new s.Z(d)});else if(l)this.index=new x({filehandle:new s.Z(l)});else if(r)this.index=new x({filehandle:new s.Z(`${r}.tbi`)});else throw TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, csiPath, tbiUrl, csiUrl");this.renameRefSeq=u,this.chunkCache=new i.Z({cache:new o({maxSize:Math.floor(g/65536)}),fill:(e,t)=>this.readChunk(e,{signal:t})})}async getLines(e,t,r,i){let n,a;let s={};"function"==typeof i?a=i:(s=i,a=i.lineCallback,n=i.signal);let o=await this.index.getMetadata(s);f(n);let l=t??0,h=r??o.maxRefLength;if(!(l<=h))throw TypeError("invalid start and end coordinates. start must be less than or equal to end");if(l===h)return;let c=await this.index.blocksForRange(e,l,h,s);f(n);let d=new TextDecoder("utf8");for(let t of c){let{buffer:r,cpositions:i,dpositions:s}=await this.chunkCache.get(t.toString(),t,n);f(n);let c=0,u=0,g=d.decode(r),b=/^[\u0000-\u007F]*$/.test(g);for(;c<g.length;){let n,f;if(b){if(-1===(f=g.indexOf("\n",c)))break;n=g.slice(c,f)}else{if(-1===(f=r.indexOf(10,c)))break;let e=r.slice(c,f);n=d.decode(e)}if(s){for(;c+t.minv.dataPosition>=s[u++];);u--}let{startCoordinate:m,overlaps:p}=this.checkLine(o,e,l,h,n);if(p)a(n,256*i[u]+(c-s[u])+t.minv.dataPosition+1);else if(void 0!==m&&m>=h)return;c=f+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){let{firstDataLine:t,metaChar:r,maxBlockSize:i}=await this.getMetadata(e);f(e.signal);let a=(t?.blockPosition||0)+i,s=await this.filehandle.read(a,0,e),o=await (0,n.Ri)(s);if(r){let e=-1,t=r.charCodeAt(0);for(let r=0;r<o.length&&(r!==e+1||o[r]===t);r+=1)10===o[r]&&(e=r);return o.subarray(0,e+1)}return o}async getHeader(e={}){let t=new TextDecoder("utf8"),r=await this.getHeaderBuffer(e);return t.decode(r)}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,t,r,i,n){let{columnNumbers:a,metaChar:s,coordinateType:o,format:l}=e;if(s&&n.startsWith(s))return{overlaps:!1};let{ref:h,start:c,end:d}=a;h||(h=0),c||(c=0),d||(d=0),"VCF"===l&&(d=8);let f=Math.max(h,c,d),u=1,g=0,b="",m=-1/0,p=n.length;for(let e=0;e<p+1;e++)if("	"===n[e]||e===p){if(u===h){if(this.renameRefSeq(n.slice(g,e))!==t)return{overlaps:!1}}else if(u===c){if(m=parseInt(n.slice(g,e),10),"1-based-closed"===o&&(m-=1),m>=i||(0===d||d===c)&&m+1<=r)return{startCoordinate:m,overlaps:!1}}else if("VCF"===l&&4===u)b=n.slice(g,e);else if(u===d&&("VCF"===l?this._getVcfEnd(m,b,n.slice(g,e)):Number.parseInt(n.slice(g,e),10))<=r)return{overlaps:!1};if(g=e+1,(u+=1)>f)break}return{startCoordinate:m,overlaps:!0}}_getVcfEnd(e,t,r){let i=e+t.length,n=r.includes("SVTYPE=TRA");if("."===r[0]||n){if(n)return e+1}else{let e=";";for(let t=0;t<r.length;t+=1){if(";"===e&&"END="===r.slice(t,t+4)){let e=r.indexOf(";",t);-1===e&&(e=r.length),i=parseInt(r.slice(t+4,e),10);break}e=r[t]}}return i}async lineCount(e,t={}){return this.index.lineCount(e,t)}async readChunk(e,t={}){let r=await this.filehandle.read(e.fetchedSize(),e.minv.blockPosition,t);return(0,n.y$)(r,e)}}},3549:function(e,t,r){r.d(t,{S9:function(){return i}});class i{readFile(){throw Error("unimplemented")}read(){throw Error("unimplemented")}close(){throw Error("unimplemented")}}},9762:function(e,t,r){function i(e){return("object"==typeof e&&null!==e&&"message"in e?e.message:`${e}`).replace(/\.$/,"")}r.d(t,{Z:function(){return n}});class n{constructor(e,t={}){this.baseOverrides={},this.url=e;let r=t.fetch||globalThis.fetch.bind(globalThis);t.overrides&&(this.baseOverrides=t.overrides),this.fetchImplementation=r}async fetch(e,t){let r;try{r=await this.fetchImplementation(e,t)}catch(n){if(`${n}`.includes("Failed to fetch")){console.warn(`generic-filehandle: refetching ${e} to attempt to work around chrome CORS header caching bug`);try{r=await this.fetchImplementation(e,{...t,cache:"reload"})}catch(t){throw Error(`${i(t)} fetching ${e}`,{cause:t})}}else throw Error(`${i(n)} fetching ${e}`,{cause:n})}return r}async read(e,t,r={}){let{headers:i={},signal:n,overrides:a={}}=r;e<1/0?i.range=`bytes=${t}-${t+e}`:e===1/0&&0!==t&&(i.range=`bytes=${t}-`);let s=await this.fetch(this.url,{...this.baseOverrides,...a,headers:{...i,...a.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:n});if(!s.ok)throw Error(`HTTP ${s.status} fetching ${this.url}`);if(200===s.status&&0===t||206===s.status){let t=await s.arrayBuffer(),r=s.headers.get("content-range"),i=/\/(\d+)$/.exec(r||"");return i?.[1]&&(this._stat={size:parseInt(i[1],10)}),new Uint8Array(t.slice(0,e))}if(200===s.status)throw Error(`${this.url} fetch returned status 200, expected 206`);throw Error(`HTTP ${s.status} fetching ${this.url}`)}async readFile(e={}){let t,r;"string"==typeof e?(t=e,r={}):(t=e.encoding,r=e,delete r.encoding);let{headers:i={},signal:n,overrides:a={}}=r,s=await this.fetch(this.url,{headers:i,method:"GET",redirect:"follow",mode:"cors",signal:n,...this.baseOverrides,...a});if(200!==s.status)throw Error(`HTTP ${s.status} fetching ${this.url}`);if("utf8"===t)return s.text();if(!t)return new Uint8Array(await s.arrayBuffer());throw Error(`unsupported encoding: ${t}`)}async stat(){if(!this._stat&&(await this.read(10,0),!this._stat))throw Error(`unable to determine size of file at ${this.url}`);return this._stat}async close(){}}}}]);