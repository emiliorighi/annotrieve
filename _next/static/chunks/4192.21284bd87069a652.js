"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4192],{75205:function(e,t){t.DO=function(e){return e.map(e=>`>${e.header}
${e.seq.replaceAll(/(.{1,80})/g,"$1\n").trimEnd()}`).join("\n")}},74192:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var r=o(57437),n=o(2265),a=o(98833),l=o(42382),s=o(75205),i=o(58841),c=(0,o(64059).Z)((0,r.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp"),d=o(17725),u=o(31835),p=o(94851),h=o(37926),m=o(793),f=o(90658),v=o(17764),b=o(77639),x=o(49211),g=o.n(x),Z=o(12),y=o(47198),C=o(3905),j=o(87290);async function k(e,t){let o=(0,l.getSession)(e),{leftOffset:r,rightOffset:n}=e;if(!r||!n)throw Error("no offsets on model to use for range");if(new Set(t.map(e=>e.assemblyName)).size>1)throw Error("not able to fetch sequences from multiple assemblies currently");let{rpcManager:a,assemblyManager:s}=o,i=r.assemblyName||n.assemblyName||"",c=s.get(i);if(!c)throw Error(`assembly ${i} not found`);let d=(0,j.getConf)(c,["sequence","adapter"]),u="getSequence";return a.call(u,"CoreGetFeatures",{adapterConfig:d,regions:t,sessionId:u})}let w=(0,C.makeStyles)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"},ml:{marginLeft:10}});var S=(0,y.observer)(function({model:e,handleClose:t}){let{classes:o}=w(),[x,y]=(0,n.useState)(),[C,j]=(0,n.useState)(),[S,z]=(0,n.useState)(!1),[q,E]=(0,n.useState)(!1),[R,M]=(0,n.useState)(!1),{leftOffset:A,rightOffset:N}=e,$=void 0===C;(0,n.useEffect)(()=>{let t=new AbortController;return(async()=>{try{let t=e.getSelectedRegions(A,N);if(0===t.length)throw Error("Selected region is out of bounds");j(await k(e,t))}catch(e){console.error(e),y(e)}})(),()=>{t.abort()}},[e,A,N]);let F=C?(0,s.DO)(C.map(e=>{let t=e.get("seq"),o=e.get("refName"),r=e.get("start")+1,n=e.get("end"),a=`${o}:${r}-${n}`;if((null==t?void 0:t.length)!==n-r+1)throw Error(`${a} returned ${t.length.toLocaleString()} bases, but should have returned ${(n-r).toLocaleString()}`);return S&&(t=(0,l.reverse)(t)),R&&(t=(0,l.complement)(t)),{header:a+(S?"-rev":"")+(R?"-comp":""),seq:t}})):"",O=!!F&&F.length>1e6;return(0,r.jsxs)(a.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{t(),e.setOffsets()},title:"Reference sequence",children:[(0,r.jsxs)(d.Z,{children:[x?(0,r.jsx)(a.ErrorMessage,{error:x}):$?(0,r.jsx)(a.LoadingEllipses,{message:"Retrieving sequences"}):null,(0,r.jsx)(u.Z,{"data-testid":"rubberband-sequence",variant:"outlined",multiline:!0,minRows:5,maxRows:10,disabled:O,className:o.dialogContent,fullWidth:!0,value:O?"Reference sequence too large to display, use the download FASTA button":F,slotProps:{input:{readOnly:!0,classes:{input:o.textAreaFont}}}}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(h.Z,{control:(0,r.jsx)(m.Z,{value:S,onChange:e=>{z(e.target.checked)}}),label:"Reverse sequence"}),(0,r.jsx)(h.Z,{control:(0,r.jsx)(m.Z,{value:R,onChange:e=>{M(e.target.checked)}}),label:"Complement sequence"})]}),(0,r.jsx)(f.Z,{style:{margin:10},children:'Note: Check both boxes for the "reverse complement"'})]}),(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(b.Z,{onClick:()=>{g()(F),E(!0),setTimeout(()=>{E(!1)},500)},disabled:$||!!x||O,color:"primary",startIcon:(0,r.jsx)(i.Z,{}),children:q?"Copied":"Copy to clipboard"}),(0,r.jsx)(b.Z,{onClick:()=>{(0,Z.saveAs)(new Blob([F||""],{type:"text/x-fasta;charset=utf-8"}),"jbrowse_ref_seq.fa")},disabled:$||!!x,color:"primary",startIcon:(0,r.jsx)(c,{}),children:"Download FASTA"}),(0,r.jsx)(b.Z,{onClick:t,variant:"contained",children:"Close"})]})]})})},793:function(e,t,o){o.d(t,{Z:function(){return E}});var r=o(2265),n=o(61994),a=o(7609),l=o(88429),s=o(64059),i=o(57437),c=(0,s.Z)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=(0,s.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),u=(0,s.Z)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=o(51661),h=o(45194),m=o(15245),f=o(95916);function v(e){return(0,f.ZP)("MuiCheckbox",e)}let b=(0,m.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);var x=o(1589),g=o(1190),Z=o(75913),y=o(42318),C=o(39965),j=o(69921);let k=e=>{let{classes:t,indeterminate:o,color:r,size:n}=e,l={root:["root",o&&"indeterminate","color".concat((0,p.Z)(r)),"size".concat((0,p.Z)(n))]},s=(0,a.Z)(l,v,t);return{...t,...s}},w=(0,x.ZP)(l.Z,{shouldForwardProp:e=>(0,h.Z)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:o}=e;return[t.root,o.indeterminate&&t.indeterminate,t["size".concat((0,p.Z)(o.size))],"default"!==o.color&&t["color".concat((0,p.Z)(o.color))]]}})((0,g.Z)(e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter((0,Z.Z)()).map(e=>{let[o]=e;return{props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[o].main,(t.vars||t).palette.action.hoverOpacity)}}}}),...Object.entries(t.palette).filter((0,Z.Z)()).map(e=>{let[o]=e;return{props:{color:o},style:{["&.".concat(b.checked,", &.").concat(b.indeterminate)]:{color:(t.vars||t).palette[o].main},["&.".concat(b.disabled)]:{color:(t.vars||t).palette.action.disabled}}}}),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}})),S=(0,i.jsx)(d,{}),z=(0,i.jsx)(c,{}),q=(0,i.jsx)(u,{});var E=r.forwardRef(function(e,t){var o,a,l;let s=(0,y.i)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=S,color:d="primary",icon:u=z,indeterminate:p=!1,indeterminateIcon:h=q,inputProps:m,size:f="medium",disableRipple:v=!1,className:b,slots:x={},slotProps:g={},...Z}=s,E=p?h:u,R=p?h:c,M={...s,disableRipple:v,color:d,indeterminate:p,size:f},A=k(M),N=null!==(o=g.input)&&void 0!==o?o:m,[$,F]=(0,j.Z)("root",{ref:t,elementType:w,className:(0,n.Z)(A.root,b),shouldForwardComponentProp:!0,externalForwardedProps:{slots:x,slotProps:g,...Z},ownerState:M,additionalProps:{type:"checkbox",icon:r.cloneElement(E,{fontSize:null!==(a=E.props.fontSize)&&void 0!==a?a:f}),checkedIcon:r.cloneElement(R,{fontSize:null!==(l=R.props.fontSize)&&void 0!==l?l:f}),disableRipple:v,slots:x,slotProps:{input:(0,C.Z)("function"==typeof N?N(M):N,{"data-indeterminate":p})}}});return(0,i.jsx)($,{...F,classes:A})})}}]);