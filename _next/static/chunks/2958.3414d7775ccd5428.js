"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2958],{42958:function(t,e,l){l.d(e,{makeImageData:function(){return r}});var n=l(42382),i=l(47368),f=l(25648),o=l(72667),c=l(69558),u=l(11347);async function r({ctx:t,canvasWidth:e,canvasHeight:l,renderArgs:r}){let{renderingMode:a,minorAlleleFrequencyFilter:s,sources:h,features:d,stopToken:p,lengthCutoffFilter:v}=r,{statusCallback:g=()=>{}}=r,k=l/h.length;(0,i.checkStopToken)(p);let S=await (0,n.updateStatus)("Calculating stats",g,()=>(0,u.qS)({stopToken:p,features:d.values(),minorAlleleFrequencyFilter:s,lengthCutoffFilter:v}));(0,i.checkStopToken)(p);let T=[],m=e/S.length;return await (0,n.updateStatus)("Drawing variant matrix",g,()=>{let i={};(0,n.forEachWithStopTokenCheck)(S,p,({feature:n,mostFrequentAlt:u},r)=>{var s,d,p;let v=[];if(null===(s=n.get("FORMAT"))||void 0===s?void 0:s.includes("PS")){let s=n.get("samples"),g=r/S.length*e,T=h.length;for(let e=0;e<T;e++){let n=e/T*l,{name:r,HP:S}=h[e],b=s[r];if(b){let e=null===(d=b.GT)||void 0===d?void 0:d[0];if(e){v.push(e);let l=e.includes("|");if("phased"===a){if(l){let l=null===(p=b.PS)||void 0===p?void 0:p[0],i=e.split("|");(0,c.r)(i,t,g,n,m,k,S,l)}else t.fillStyle="black",t.fillRect(g-f.f2,n-f.f2,m+f.f2,k+f.f2)}else{let l=i[e];if(void 0===l){let t=0,n=0,f=0,c=0,r=e.split(/[/|]/),a=r.length;for(let e=0;e<a;e++){let l=r[e];l===u?t++:"0"===l?c++:"."===l?n++:f++}l=(0,o.I)(c,t,f,n,a,!0),i[e]=l}l&&(0,o.G)(l,t,g,n,m,k)}}}}}else{let s=n.get("genotypes"),d=r/S.length*e,p=h.length;for(let e=0;e<p;e++){let n=e/p*l,{name:r,HP:g}=h[e],S=s[r];if(S){v.push(S);let e=S.includes("|");if("phased"===a){if(e){let e=S.split("|");(0,c.r)(e,t,d,n,m,k,g)}else t.fillStyle="black",t.fillRect(d-f.f2,n-f.f2,m+f.f2,k+f.f2)}else{let e=i[S];if(void 0===e){let t=0,l=0,n=0,f=0,c=S.split(/[/|]/),r=c.length;for(let e=0;e<r;e++){let i=c[e];i===u?t++:"0"===i?f++:"."===i?l++:n++}e=(0,o.I)(f,t,n,l,r,!0),i[S]=e}e&&(0,o.G)(e,t,d,n,m,k)}}}}T.push(v)})}),{mafs:S,arr:T}}},25648:function(t,e,l){l.d(e,{f2:function(){return n}});let n=.3},72667:function(t,e,l){l.d(e,{G:function(){return o},I:function(){return f}});var n=l(22216),i=l(25648);function f(t,e,l,i,f,o=!0){if(t===f)return o?"#ccc":"";{let t;if(e&&(t=(0,n.colord)(`hsl(200,50%,${80-e/f*50}%)`)),l){let e=`hsla(0,100%,20%,${l/f})`;t=t?t.mix(e):(0,n.colord)(e)}if(i){let e=`hsl(50,50%,50%,${i/f})`;t=t?t.mix(e):(0,n.colord)(e)}return(null==t?void 0:t.toHex())||"black"}}function o(t,e,l,f,o,c,u="",r,a=1){e.fillStyle=1!==a?(0,n.colord)(t).alpha(a).toHex():t,"inversion"===u?(1===r?(e.beginPath(),e.moveTo(l-i.f2,f-i.f2),e.lineTo(l-i.f2,f+c+i.f2),e.lineTo(l+o+i.f2,f+c/2)):(e.beginPath(),e.moveTo(l+o+i.f2,f-i.f2),e.lineTo(l+o+i.f2,f+c+i.f2),e.lineTo(l-i.f2,f+c/2)),e.closePath(),e.fill()):e.fillRect(l-i.f2,f-i.f2,o+i.f2,c+i.f2)}},69558:function(t,e,l){l.d(e,{r:function(){return c}});var n=l(95),i=l(22216),f=l(25648),o=l(40241);function c(t,e,l,c,u,r,a,s,h=!0,d=1){let p=void 0!==s?function(t,e,l,n=!0){return+t[e]?(0,o.Qm)(+l)||"black":n?"#ccc":void 0}(t,a,s,h):function(t,e,l=!0){let i=+t[e];return i?n.set1[i-1]||"black":l?"#ccc":void 0}(t,a,h);return p&&(e.fillStyle=1!==d?(0,i.colord)(p).alpha(d).toHex():p,e.fillRect(l-f.f2,c-f.f2,u+f.f2,r+f.f2)),p}},40241:function(t,e,l){function n(t){let e=0;for(let l=0;l<t.length;l++)e+=t.charCodeAt(l);return i(10*e)}function i(t){return`hsl(${t%255}, 50%, 50%)`}l.d(e,{Qm:function(){return i},p:function(){return n}})}}]);