"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1897],{68926:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(57437),o=n(2265),l=n(87290),r=n(42382),s=n(47198),a=n(50611);function u(e,t){var n,i,o,l;let r;let s=t?(0,a.I)(t):void 0,u=e.get("start"),d=e.get("end"),c=e.get("strand"),f=e.get("mate"),v=e.get("refName"),g=0,m=0,h=0,x=0;if(["<TRA","<DEL","<INV","<INS","<DUP","<CNV"].some(e=>null==t?void 0:t.startsWith(e))){let t=e.get("INFO"),s=null!==(i=null===(n=null==t?void 0:t.END)||void 0===n?void 0:n[0])&&void 0!==i?i:d;r=null!==(l=null===(o=null==t?void 0:t.CHR2)||void 0===o?void 0:o[0])&&void 0!==l?l:v,g=s,m=s-1,d=u+1}else if(null==s?void 0:s.MatePosition){let e=s.MatePosition.split(":");x="left"===s.MateDirection?1:-1,h="left"===s.Join?-1:1,g=+e[1],m=+e[1]-1,r=e[0]}return{k1:{refName:v,start:u,end:d,strand:c,mateDirection:x},k2:null!=f?f:{refName:r||"unknown",end:g,start:m,mateDirection:h}}}let d=(0,o.lazy)(()=>n.e(9699).then(n.bind(n,79699))),c=(0,s.observer)(function({model:e,feature:t,alt:n,assembly:s,view:a}){var c,f;let[v,g]=(0,o.useState)(!1),{height:m}=e,{k1:h,k2:x}=u(t,n),k=(0,o.useRef)(null),N=(0,l.getConf)(e,"color",{feature:t,alt:n}),p=s.getCanonicalRefName(h.refName)||h.refName,b=s.getCanonicalRefName(x.refName)||x.refName,j=h.start,P=x.start,C=null===(c=a.bpToPx({refName:p,coord:j}))||void 0===c?void 0:c.offsetPx,M=null===(f=a.bpToPx({refName:b,coord:P}))||void 0===f?void 0:f.offsetPx;if(void 0!==C&&void 0!==M){let l=Math.abs((M-C)/2),s=Math.min(m,l),c=C-a.offsetPx,f=M-a.offsetPx,p=v?"black":N;return l>1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:`M ${c} 0 C ${c} ${s}, ${f} ${s}, ${f} 0`,ref:k,...(0,r.getStrokeProps)(p),strokeWidth:3,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},fill:"none",pointerEvents:"stroke"}),h.mateDirection?(0,i.jsx)("line",{...(0,r.getStrokeProps)(p),strokeWidth:3,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},x1:c,x2:c+20*h.mateDirection,y1:1.5,y2:1.5}):null,x.mateDirection?(0,i.jsx)("line",{...(0,r.getStrokeProps)(p),strokeWidth:3,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},x1:f,x2:f+20*x.mateDirection,y1:1.5,y2:1.5}):null,v?(0,i.jsx)(o.Suspense,{fallback:null,children:(0,i.jsx)(d,{contents:function(e,t){var n;let{k1:i,k2:o}=u(e,t);return[e.get("name"),e.get("id"),(0,r.assembleLocString)(i),(0,r.assembleLocString)(o),null===(n=e.get("INFO"))||void 0===n?void 0:n.SVTYPE,t].filter(e=>!!e).join("<br/>")}(t,n)})}):null]}):null}return null}),f=(0,s.observer)(function({model:e,exportSVG:t,children:n}){let{height:o}=e,l=Math.round((0,r.getContainingView)(e).dynamicBlocks.totalWidthPx);return t?n:(0,i.jsx)("svg",{width:l,height:o,children:n})});var v=(0,s.observer)(function({model:e,exportSVG:t}){let n=(0,r.getContainingView)(e),o=(0,r.getSession)(e),{assemblyManager:l}=o,{features:s}=e,a=l.get(n.assemblyNames[0]);return a?(0,i.jsx)(f,{model:e,exportSVG:t,children:null==s?void 0:s.map(t=>{var l;let r=t.get("ALT");return null!==(l=null==r?void 0:r.map(l=>(0,i.jsx)(c,{session:o,feature:t,alt:l,view:n,model:e,assembly:a},`${t.id()}-${l}`)))&&void 0!==l?l:(0,i.jsx)(c,{session:o,feature:t,view:n,model:e,assembly:a},t.id())})}):null})},21897:function(e,t,n){n.d(t,{renderArcSvg:function(){return r}});var i=n(57437),o=n(42382),l=n(68926);async function r(e,t){await (0,o.when)(()=>!e.loading);let n=(0,o.getContainingView)(e).dynamicBlocks.totalWidthPx,r=e.height,s=`arc-${e.id}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:s,children:(0,i.jsx)("rect",{x:0,y:0,width:n,height:r})})}),(0,i.jsx)("g",{clipPath:`url(#${s})`,children:(0,i.jsx)(l.Z,{model:e,exportSVG:!0})})]})}}}]);