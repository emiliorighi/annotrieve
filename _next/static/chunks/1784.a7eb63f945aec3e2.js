"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1784],{48732:function(o,r,e){e.d(r,{drawFeats:function(){return c}});var t=e(42382),n=e(87290);function l(o,r,e,t,n,l){e<0&&(o+=e,e=-e),t<0&&(r+=t,t=-t),l&&(n.fillStyle=l),n.fillRect(o,r,e,t)}function a(o,r,e,t,n,l){e<0&&(o+=e,e=-e),t<0&&(r+=t,t=-t),l&&(n.strokeStyle=l),n.strokeRect(o,r,e,t)}var i=e(1698),f=e(96764);function c(o,r){let{chainData:e}=o;if(!e)return;let{assemblyManager:c}=(0,t.getSession)(o),d=(0,t.getContainingView)(o),s=d.assemblyNames[0],_=c.get(s);_&&((0,f.Fl)(e)?function({ctx:o,self:r,chainData:e,view:f,asm:c}){var d,s,_,u,m,v,h;let p=[],x=(0,n.getConf)(r,"featureHeight"),g=(null===(d=r.colorBy)||void 0===d?void 0:d.type)||"insertSizeAndOrientation",{chains:N,stats:P}=e;for(let e of N)if(e.length>1){let o=e[0],r=e[1],t=c.getCanonicalRefName(o.refName)||o.refName,n=c.getCanonicalRefName(r.refName)||r.refName,l=null===(s=f.bpToPx({refName:t,coord:o.start}))||void 0===s?void 0:s.offsetPx,a=null===(_=f.bpToPx({refName:t,coord:o.end}))||void 0===_?void 0:_.offsetPx,i=null===(u=f.bpToPx({refName:n,coord:r.start}))||void 0===u?void 0:u.offsetPx,d=null===(m=f.bpToPx({refName:n,coord:r.end}))||void 0===m?void 0:m.offsetPx,v=0;if(void 0!==l&&void 0!==a&&void 0!==i&&void 0!==d){if(o.refName===r.refName){let e=Math.min(o.start,r.start);v=Math.abs(Math.max(o.end,r.end)-e)}p.push({r1s:l,r1e:a,r2s:i,r2e:d,v0:o,v1:r,distance:v})}}else if(r.drawSingletons){let r=e[0],t=c.getCanonicalRefName(r.refName)||r.refName,n=null===(v=f.bpToPx({refName:t,coord:r.start}))||void 0===v?void 0:v.offsetPx,i=null===(h=f.bpToPx({refName:t,coord:r.end}))||void 0===h?void 0:h.offsetPx;if(void 0!==n&&void 0!==i){let r=Math.max(i-n,2);l(n-f.offsetPx,0,r,x,o,"#f00"),a(n-f.offsetPx,0,r,x,o,"#a00")}}let M=Math.log((0,t.max)(p.map(o=>o.distance))),C=Math.max(Math.log((0,t.min)(p.map(o=>o.distance)))-1,0),b=(r.height-20)/(M-C);for(let{r1e:r,r1s:e,r2e:t,r2s:n,distance:c,v0:d,v1:s}of p){let _=Math.max(r-e,2),u=Math.max(t-n,2),[m,v]=function({type:o,v0:r,v1:e,stats:t}){if("insertSizeAndOrientation"===o)return(0,i.k5)(r,e,t);if("orientation"===o)return(0,i.uE)(r);if("insertSize"===o)return(0,i.Wh)(r,e,t);if("gradient"===o){let o=Math.min(r.start,e.start),t=Math.max(r.end,e.end);return[`hsl(${10*Math.log10(Math.abs(t-o))},50%,50%)`,`hsl(${10*Math.log10(Math.abs(t-o))},50%,30%)`]}}({type:g,v0:d,v1:s,stats:P})||[],h=(Math.log(c)-C)*b,p=x/2-.5,N=n-r;l(r-f.offsetPx,h+p,N,1,o,"black"),a(e-f.offsetPx,h,_,x,o,v),a(n-f.offsetPx,h,u,x,o,v),l(e-f.offsetPx,h,_,x,o,m),l(n-f.offsetPx,h,u,x,o,m)}}({self:o,view:d,asm:_,ctx:r,chainData:e}):function({ctx:o,self:r,chainData:e,view:f,asm:c}){var d,s,_,u,m;let v=[],{chains:h}=e,{height:p}=r,x=(0,n.getConf)(r,"featureHeight");for(let o of h){let r=Number.MAX_VALUE,e=Number.MIN_VALUE;for(let t of o){let o=c.getCanonicalRefName(t.refName)||t.refName,n=null===(d=f.bpToPx({refName:o,coord:t.start}))||void 0===d?void 0:d.offsetPx,l=null===(s=f.bpToPx({refName:o,coord:t.end}))||void 0===s?void 0:s.offsetPx;void 0!==n&&void 0!==l&&(r=Math.min(r,n),e=Math.max(e,l))}v.push({distance:Math.abs(e-r),minX:r,chain:o})}let g=v.map(o=>o.distance),N=Math.log((0,t.max)(g)),P=Math.max(Math.log((0,t.min)(g))-1,0),M=(p-20)/(N-P),C=x/2-.5;for(let{minX:r,distance:e,chain:t}of v){let n;let d=(Math.log(e)-P)*M;l(r-f.offsetPx,d+C,e,1,o,"black");let s=t[0];for(let r of(n=2048&s.flags?"-"===(null===(_=s.SA)||void 0===_?void 0:_.split(";")[0].split(",")[2])?-1:1:s.strand,t)){let e=c.getCanonicalRefName(r.refName)||r.refName,t=null===(u=f.bpToPx({refName:e,coord:r.start}))||void 0===u?void 0:u.offsetPx,s=null===(m=f.bpToPx({refName:e,coord:r.end}))||void 0===m?void 0:m.offsetPx;if(void 0!==t&&void 0!==s){let e=Math.max(s-t,2),c=t-f.offsetPx,_=-1==r.strand*n?"color_rev_strand":"color_fwd_strand";a(c,d,e,x,o,i.ue[_]),l(c,d,e,x,o,i.If[_])}}}}({self:o,view:d,asm:_,ctx:r,chainData:e}))}},1698:function(o,r,e){e.d(r,{If:function(){return n},Wh:function(){return a},k5:function(){return f},uE:function(){return d},ue:function(){return l}});var t=e(93755);let n={color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000",color_rev_diff_chr:"#969696",color_pair_lr:"#c8c8c8",color_pair_rr:"navy",color_pair_rl:"teal",color_pair_ll:"green",color_nostrand:"#c8c8c8",color_interchrom:"purple",color_longinsert:"red",color_shortinsert:"pink",color_unknown:"grey"},l={color_fwd_strand_not_proper:"#CA6767",color_rev_strand_not_proper:"#7272AA",color_fwd_strand:"#DC2A2A",color_rev_strand:"#4141BA",color_fwd_missing_mate:"#921111",color_rev_missing_mate:"#111192",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#696969",color_pair_lr:"#8C8C8C",color_pair_rr:"#00005A",color_pair_rl:"#005A5A",color_pair_ll:"#005A00",color_nostrand:"#8C8C8C",color_interchrom:"#5A005A",color_longinsert:"#B30000",color_shortinsert:"#FF3A5C",color_unknown:"grey"};function a(o,r,e){let t=o.refName===r.refName,a=Math.abs(o.tlen||0);return t&&a>((null==e?void 0:e.upper)||0)?[n.color_longinsert,l.color_longinsert]:t&&a<((null==e?void 0:e.lower)||0)?[n.color_shortinsert,l.color_shortinsert]:t?void 0:[n.color_interchrom,l.color_interchrom]}let i=[n.color_unknown,n.color_unknown];function f(o,r,e){return c(o)||a(o,r,e)||i}function c(o){let r=t.uD.fr[o.pair_orientation||""],e=t.oL[r];return"LR"===r?void 0:[n[e],l[e]]}function d(o){return c(o)||i}}}]);