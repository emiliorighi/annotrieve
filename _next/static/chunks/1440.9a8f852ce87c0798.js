"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1440],{91440:function(e,n,i){i.r(n),i.d(n,{default:function(){return Q}});var s=i(57437),t=i(2265),a=i(98833),l=i(42382),r=i(7046),o=i(94551),c=i(64059),d=(0,c.Z)((0,s.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined"),u=i(90658),m=i(77639),g=i(31835),h=i(1214),x=i(9685),j=i(90752),p=i(21127),v=i(47198),f=i(91904),Z=i(3905),y=i(61888),b=i(27137),S=i(20599),C=i(92071),k=i(18150),N=i(84874);let P=(0,t.lazy)(()=>i.e(6766).then(i.bind(i,96766))),w=(0,Z.makeStyles)()(()=>({iconMargin:{marginRight:"0.5rem"}}));function M(){let{classes:e}=w();return(0,s.jsx)(k.Z,{className:e.iconMargin,title:"This plugin was installed by an administrator, you cannot remove it.",children:(0,s.jsx)("span",{children:(0,s.jsx)(x.Z,{disabled:!0,children:(0,s.jsx)(C.Z,{})})})})}let E=(0,v.observer)(function({plugin:e,model:n}){let{classes:i}=w(),{pluginManager:t}=(0,l.getEnv)(n),a=(0,l.getSession)(n),{jbrowse:r,adminMode:o}=a;return(0,s.jsx)(k.Z,{className:i.iconMargin,title:"Uninstall plugin",children:(0,s.jsx)(x.Z,{"data-testid":`removePlugin-${e.name}`,onClick:()=>{a.queueDialog(n=>[P,{plugin:e.name,onClose:i=>{if(i){let n=t.pluginMetadata[e.name];o?r.removePlugin(n):(0,b.isSessionWithSessionPlugins)(a)&&a.removeSessionPlugin(n)}n()}}])},children:(0,s.jsx)(S.Z,{})})})}),I=(0,v.observer)(function({plugin:e,model:n}){let i=(0,l.getSession)(n),{adminMode:t}=i;return(0,s.jsxs)(N.ZP,{children:[t||function(e,n){let{pluginManager:i}=(0,l.getEnv)(n);return!!(0,l.isSessionWithSessionPlugins)(n)&&n.sessionPlugins.some(n=>{var s;return(null===(s=i.pluginMetadata[e.name])||void 0===s?void 0:s.url)===n.url})}(e,i)?(0,s.jsx)(E,{plugin:e,model:n}):(0,s.jsx)(M,{}),(0,s.jsx)(u.Z,{children:[e.name,e.version?`(v${e.version})`:""].filter(e=>!!e).join(" ")})]},e.name)}),L=(0,v.observer)(function({pluginManager:e,model:n}){let{plugins:i}=e,{filterText:t}=n,a=i.filter(n=>{var i;return!(null===(i=e.pluginMetadata[n.name])||void 0===i?void 0:i.isCore)});return(0,s.jsx)(y.Z,{children:a.length>0?a.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())).map(e=>(0,s.jsx)(I,{plugin:e,model:n},e.name)):(0,s.jsx)(u.Z,{children:"No plugins currently installed"})})});var A=i(89470),R=(0,c.Z)((0,s.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),z=(0,c.Z)((0,s.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),F=i(41563),T=i(61002),$=i(61994),W=i(7609),B=i(1589),_=i(42318),q=i(15245),D=i(95916);function H(e){return(0,D.ZP)("MuiCardActions",e)}(0,q.Z)("MuiCardActions",["root","spacing"]);let V=e=>{let{classes:n,disableSpacing:i}=e;return(0,W.Z)({root:["root",!i&&"spacing"]},H,n)},U=(0,B.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:i}=e;return[n.root,!i.disableSpacing&&n.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Y=t.forwardRef(function(e,n){let i=(0,_.i)({props:e,name:"MuiCardActions"}),{disableSpacing:t=!1,className:a,...l}=i,r={...i,disableSpacing:t},o=V(r);return(0,s.jsx)(U,{className:(0,$.Z)(o.root,a),ownerState:r,ref:n,...l})}),O=(0,Z.makeStyles)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"},mr:{marginRight:"0.5em"}}),G=(0,v.observer)(function({plugin:e,model:n}){let{classes:i}=O(),r=(0,l.getSession)(n),{pluginManager:o}=(0,l.getEnv)(n),{runtimePluginDefinitions:c}=o,d=c.some(n=>"url"in n&&n.url===e.url),[g,h]=(0,t.useState)(!1),{adminMode:x,jbrowse:j}=r,{name:p,authors:v,description:f}=e;return(0,s.jsxs)(F.Z,{variant:"outlined",className:i.card,children:[(0,s.jsxs)(T.Z,{children:[(0,s.jsx)(u.Z,{variant:"h5",children:(0,s.jsx)(a.ExternalLink,{href:`${e.location}#readme`,children:e.name})}),(0,s.jsxs)("div",{className:i.dataField,children:[(0,s.jsx)(z,{className:i.mr}),(0,s.jsx)(u.Z,{children:v.join(", ")})]}),(0,s.jsx)(u.Z,{className:i.bold,children:"Description:"}),(0,s.jsx)(u.Z,{children:f})]}),(0,s.jsx)(Y,{children:(0,s.jsx)(m.Z,{variant:"contained",disabled:d||g,startIcon:d?(0,s.jsx)(R,{}):(0,s.jsx)(A.Z,{}),onClick:()=>{x?j.addPlugin(e):(0,b.isSessionWithSessionPlugins)(r)?r.addSessionPlugin(e):r.notify("No way to install plugin"),h(!0)},children:d?"Installed":"Install"})})]},p)}),J=(0,t.lazy)(()=>i.e(1326).then(i.bind(i,11326))),K=(0,Z.makeStyles)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:e.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"},mr:{marginRight:"0.3em"},m:{margin:"1em"}}));var Q=(0,v.observer)(function({model:e}){let{classes:n}=K(),{plugins:i,error:c}=function(){let[e,n]=(0,t.useState)(),[i,s]=(0,t.useState)();return(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok){let n=await e.text();throw Error(`HTTP ${e.status} fetching plugins: ${n}`)}let i=await e.json();n(i.plugins)}catch(e){console.error(e),s(e)}})()},[]),{plugins:e,error:i}}(),{filterText:v}=e,Z=(0,l.getSession)(e),{adminMode:y}=Z,{pluginManager:b}=(0,f.getEnv)(e);return(0,s.jsxs)("div",{children:[y&&(0,s.jsxs)(s.Fragment,{children:[!l.isElectron&&(0,s.jsxs)("div",{className:n.adminBadge,children:[(0,s.jsx)(d,{className:n.mr}),(0,s.jsxs)(u.Z,{children:["You are using the ",(0,s.jsx)("code",{children:"admin-server"}),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store."]})]}),(0,s.jsx)(m.Z,{className:n.customPluginButton,variant:"contained",onClick:()=>{Z.queueDialog(n=>[J,{model:e,onClose:n}])},children:"Add custom plugin"})]}),(0,s.jsx)(g.Z,{label:"Filter plugins",value:v,onChange:n=>{e.setFilterText(n.target.value)},fullWidth:!0,slotProps:{input:{endAdornment:(0,s.jsx)(h.Z,{position:"end",children:(0,s.jsx)(x.Z,{onClick:()=>{e.clearFilterText()},children:(0,s.jsx)(r.Z,{})})})}}}),(0,s.jsxs)(j.Z,{defaultExpanded:!0,children:[(0,s.jsx)(p.Z,{expandIcon:(0,s.jsx)(o.Z,{className:n.expandIcon}),children:(0,s.jsx)(u.Z,{variant:"h5",children:"Installed plugins"})}),(0,s.jsx)("div",{className:n.m,children:(0,s.jsx)(L,{pluginManager:b,model:e})})]}),(0,s.jsxs)(j.Z,{defaultExpanded:!0,children:[(0,s.jsx)(p.Z,{expandIcon:(0,s.jsx)(o.Z,{className:n.expandIcon}),children:(0,s.jsx)(u.Z,{variant:"h5",children:"Available plugins"})}),c?(0,s.jsx)(u.Z,{color:"error",children:`${c}`}):i?i.filter(e=>!(l.isElectron&&e.cjsUrl)&&e.name.toLowerCase().includes(v.toLowerCase())).map(n=>(0,s.jsx)(G,{plugin:n,model:e},n.name)):(0,s.jsx)(a.LoadingEllipses,{})]})]})})},7046:function(e,n,i){var s=i(64059),t=i(57437);n.Z=(0,s.Z)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},92071:function(e,n,i){var s=i(64059),t=i(57437);n.Z=(0,s.Z)((0,t.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")}}]);