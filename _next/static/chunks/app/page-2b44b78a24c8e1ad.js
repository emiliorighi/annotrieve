(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{11933:function(e,s,t){Promise.resolve().then(t.bind(t,95721))},95721:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return sl}});var a=t(57437),n=t(2265),l=t(27648),r=t(75135),i=t(94508);let o=n.forwardRef((e,s)=>{let{className:t,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});o.displayName="Input";var d=t(35974),c=t(73247),m=t(32489),x=t(50989);function u(e){return(0,x.R1)("/organisms",e)}var h=t(36553);function f(e){return(0,x.R1)("/taxons",e)}function p(e){let{onFilterSelect:s}=e,[t,l]=(0,n.useState)(""),r=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,[t,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>a(e),s);return()=>clearTimeout(t)},[e,s]),t}(t,300),[i,x]=(0,n.useState)([]),[p,g]=(0,n.useState)(!1),[j,N]=(0,n.useState)(0),v=(0,n.useRef)(null),b=(0,n.useRef)(0);(0,n.useEffect)(()=>{let e=!1;return async function(s){if(r.trim().length<2){x([]),g(!1),N(0);return}try{var t,a,n,l,i,o,d,c,m,p,j,v,y,w,_,C,k,S,z,Z,L;let[F,A,R]=await Promise.all([u({filter:r,limit:5,offset:0}).catch(()=>({results:[]})),(0,h.gG)({filter:r,limit:5,offset:0}).catch(()=>({results:[]})),f({filter:r,limit:5,offset:0}).catch(()=>({results:[]}))]);if(e||s!==b.current)return;let D=[];for(let e of F.results.slice(0,3)||[]){let s=String(null!==(t=e.taxid)&&void 0!==t?t:""),r=String(null!==(n=null!==(a=e.organism_name)&&void 0!==a?a:e.organismName)&&void 0!==n?n:""),d=null!==(l=e.common_name)&&void 0!==l?l:e.commonName,c=null!==(o=null!==(i=e.annotations_count)&&void 0!==i?i:e.annotationCount)&&void 0!==o?o:0;D.push({type:"organism",id:e,name:d||r||s,subtitle:r||s,annotationCount:c,relatedObject:e})}for(let e of A.results.slice(0,3)||[]){let s=String(null!==(c=null!==(d=e.assembly_accession)&&void 0!==d?d:e.assemblyAccession)&&void 0!==c?c:""),t=String(null!==(p=null!==(m=e.assembly_name)&&void 0!==m?m:e.assemblyName)&&void 0!==p?p:""),a=String(null!==(v=null!==(j=e.organism_name)&&void 0!==j?j:e.organismName)&&void 0!==v?v:""),n=null!==(w=null!==(y=e.annotations_count)&&void 0!==y?y:e.annotationCount)&&void 0!==w?w:0;D.push({type:"assembly",id:s||t,name:t||s,subtitle:a&&s?"".concat(a," • ").concat(s):s,annotationCount:n,relatedObject:e})}for(let e of R.results.filter(e=>e.children.length>0).slice(0,3)||[]){let s=String(null!==(_=e.taxid)&&void 0!==_?_:""),t=String(null!==(k=null!==(C=e.scientific_name)&&void 0!==C?C:e.scientificName)&&void 0!==k?k:""),a=null!==(S=e.common_name)&&void 0!==S?S:e.commonName,n=String(null!==(z=e.rank)&&void 0!==z?z:""),l=null!==(L=null!==(Z=e.annotations_count)&&void 0!==Z?Z:e.annotationCount)&&void 0!==L?L:0;D.push({type:"taxon",id:s,name:a||t||s,subtitle:n&&t?"".concat(n," • ").concat(t):t,annotationCount:l,relatedObject:e})}x(D.slice(0,8)),g(D.length>0),N(0)}catch(t){e||b.current!==s||(x([]),g(!1),N(0))}}(++b.current),()=>{e=!0}},[r]),(0,n.useEffect)(()=>{function e(e){v.current&&!v.current.contains(e.target)&&g(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let y=(0,n.useCallback)(e=>{s(e.type,e.relatedObject),l(""),x([]),g(!1),N(0)},[s]),w=e=>{switch(e){case"taxon":return"bg-primary/10 text-primary border-primary/20";case"organism":return"bg-secondary/10 text-secondary border-secondary/20";case"assembly":return"bg-accent/10 text-accent border-accent/20";default:return"bg-muted text-muted-foreground"}};return(0,a.jsxs)("div",{ref:v,className:"relative w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o,{type:"text",placeholder:"Search by organism, taxon or assembly..",value:t,onChange:e=>{l(e.target.value),!p&&e.target.value.length>=2&&g(!0)},onKeyDown:e=>{if(p&&0!==i.length)switch(e.key){case"ArrowDown":e.preventDefault(),N(e=>(e+1)%i.length);break;case"ArrowUp":e.preventDefault(),N(e=>(e-1+i.length)%i.length);break;case"Enter":e.preventDefault(),i[j]&&y(i[j]);break;case"Escape":g(!1)}},onFocus:()=>r.length>=2&&i.length>0&&g(!0),className:"pl-10 pr-10 h-11 bg-background"}),t&&(0,a.jsx)("button",{onClick:()=>{l(""),g(!1),x([]),N(0)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]}),p&&i.length>0&&(0,a.jsx)("div",{className:"absolute top-full mt-2 w-full bg-popover border rounded-lg shadow-lg z-50 overflow-hidden",children:(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:i.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>y(e),className:"w-full px-4 py-3 flex items-start gap-3 hover:bg-accent/50 transition-colors text-left ".concat(s===j?"bg-accent/50":""),children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(d.C,{variant:"outline",className:"text-xs capitalize ".concat(w(e.type)),children:e.type}),(0,a.jsx)("span",{className:"font-medium text-sm text-foreground truncate",children:e.name})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:[e.annotationCount," annotations"]})]},"".concat(e.type,"-").concat(e.id)))})})]})}var g=t(66070),j=t(62869),N=t(49027);let v=N.fC;N.xz;let b=N.h_;N.x8;let y=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});y.displayName=N.aV.displayName;let w=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(b,{children:[(0,a.jsx)(y,{}),(0,a.jsxs)(N.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[n,(0,a.jsxs)(N.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});w.displayName=N.VY.displayName;let _=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};_.displayName="DialogHeader";let C=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};C.displayName="DialogFooter";let k=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});k.displayName=N.Dx.displayName;let S=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(N.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...n})});S.displayName=N.dk.displayName;var z=t(50091),Z=t(13420);function L(e){let{ancestors:s,currentTaxon:t,children:n,onTaxonClick:l}=e;[...s.filter(e=>e.taxid!==t.taxid).map(e=>e.taxid),t.taxid];let r=e=>{var s;let{node:n,isCurrent:i}=e,o=n.children&&n.children.length>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b hover:bg-muted/50 transition-colors cursor-pointer ".concat(i?"bg-primary/5":""),onClick:e=>{e.target.closest("button")||null==l||l(n.taxid)},children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"flex items-center gap-2",style:{paddingLeft:"".concat(24*n.level,"px")},children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium ".concat(i?"text-primary":""),children:n.scientific_name}),(0,a.jsx)(d.C,{variant:"outline",className:"text-xs capitalize",children:n.rank})]})})}),(0,a.jsx)("td",{className:"p-3 text-right",children:(0,a.jsx)("span",{className:"font-semibold ".concat(i?"text-primary":""),children:n.annotations_count.toLocaleString()})})]}),o&&(null===(s=n.children)||void 0===s?void 0:s.map(e=>(0,a.jsx)(r,{node:e,isCurrent:e.taxid===t.taxid},e.taxid)))]})},i=(()=>{let e=[],a=s.filter(e=>e.taxid!==t.taxid),l=0;return a.length>0?a.forEach((s,r)=>{e.push({taxid:s.taxid,scientific_name:s.scientific_name||"",rank:s.rank||"",annotations_count:s.annotations_count||0,level:l,children:r===a.length-1?[{taxid:t.taxid,scientific_name:t.scientific_name||"",rank:t.rank||"",annotations_count:t.annotations_count||0,level:l+1,children:n.map(e=>({taxid:e.taxid,scientific_name:e.scientific_name||"",rank:e.rank||"",annotations_count:e.annotations_count||0,level:l+2}))}]:void 0}),l++}):e.push({taxid:t.taxid,scientific_name:t.scientific_name||"",rank:t.rank||"",annotations_count:t.annotations_count||0,level:0,children:n.map(e=>({taxid:e.taxid,scientific_name:e.scientific_name||"",rank:e.rank||"",annotations_count:e.annotations_count||0,level:1}))}),e})();return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left font-semibold text-sm",children:"Taxonomic Name"}),(0,a.jsx)("th",{className:"p-3 text-right font-semibold text-sm",children:"Annotations"})]})}),(0,a.jsx)("tbody",{children:i.map(e=>(0,a.jsx)(r,{node:e,isCurrent:e.taxid===t.taxid},e.taxid))})]})})})}var F=t(22135),A=t(40875),R=t(33245),D=t(15051),M=t(20265),O=t(62945),E=t(31047),P=t(98420),T=t(96362),I=t(92451),B=t(10407),G=t(33911),U=t(30401);let V=G.fC;G.ZA;let J=G.B4,Y=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(G.xz,{ref:s,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[n,(0,a.jsx)(G.JO,{asChild:!0,children:(0,a.jsx)(A.Z,{className:"h-4 w-4 opacity-50"})})]})});Y.displayName=G.xz.displayName;let H=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.u_,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})});H.displayName=G.u_.displayName;let W=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.$G,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})});W.displayName=G.$G.displayName;let $=n.forwardRef((e,s)=>{let{className:t,children:n,position:l="popper",...r}=e;return(0,a.jsx)(G.h_,{children:(0,a.jsxs)(G.VY,{ref:s,className:(0,i.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...r,children:[(0,a.jsx)(H,{}),(0,a.jsx)(G.l_,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(W,{})]})})});$.displayName=G.VY.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t),...n})}).displayName=G.__.displayName;let q=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(G.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(G.wU,{children:(0,a.jsx)(U.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(G.eT,{children:n})]})});q.displayName=G.ck.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(G.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=G.Z0.displayName;var K=t(6418),Q=t(40519);let X=K.fC,ee=K.xz;K.ZA,K.Uv,K.Tr,K.Ee,n.forwardRef((e,s)=>{let{className:t,inset:n,children:l,...r}=e;return(0,a.jsxs)(K.fF,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",t),...r,children:[l,(0,a.jsx)(B.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=K.fF.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(K.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}).displayName=K.tu.displayName;let es=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(K.Uv,{children:(0,a.jsx)(K.VY,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});es.displayName=K.VY.displayName;let et=n.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(K.ck,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",t),...l})});function ea(e){let{taxid:s,onAssembliesSelectionChange:t,onAssemblySelect:l,onJBrowseChange:r,view:i}=e,[o,c]=(0,n.useState)([]),[m,x]=(0,n.useState)(0),[u,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)(null),[N,v]=(0,n.useState)(new Set),[b,y]=(0,n.useState)({}),[w,_]=(0,n.useState)(null),[C,k]=(0,n.useState)(!1),[S,Z]=(0,n.useState)(null),[L,G]=(0,n.useState)("release_date"),[U,H]=(0,n.useState)("desc"),[W,K]=(0,n.useState)(1),[Q]=(0,n.useState)(6),[ea,en]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=!1;return async function(){if(s){f(!0),g(null);try{var t;let a=(W-1)*Q,n={taxids:s,limit:Q,offset:a,sort_by:L,sort_order:U};w&&(n.submitters=w);let l=await (0,h.gG)(n);if(e)return;c(l.results||[]),x(null!==(t=l.total)&&void 0!==t?t:0)}catch(s){e||g((null==s?void 0:s.message)||"Failed to load assemblies")}finally{e||f(!1)}}}(),()=>{e=!0}},[s,L,U,w,W,Q]),(0,n.useEffect)(()=>{let e=!1;return async function(){if(s){k(!0),Z(null);try{let t=await (0,h.JM)({taxids:s},"submitter");if(e)return;y(t||{})}catch(s){e||Z((null==s?void 0:s.message)||"Failed to load submitters")}finally{e||k(!1)}}}(),()=>{e=!0}},[s]),(0,n.useEffect)(()=>{v(new Set)},[s]);let el=e=>{v(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),t&&t(Array.from(a)),a})},er=Math.ceil(m/Q),ei=e=>{K(e)};return(0,a.jsxs)("div",{className:"border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.z,{variant:"ghost",size:"sm",onClick:()=>en(!ea),className:"h-8 px-2 hover:bg-muted",children:ea?(0,a.jsx)(F.Z,{className:"h-4 w-4"}):(0,a.jsx)(A.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-foreground",children:"Related Assemblies"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(0,a.jsx)("span",{className:"font-semibold text-foreground",children:m})," assembl",1!==m?"ies":"y"," available"]})]}),N.size>0&&(0,a.jsxs)(d.C,{variant:"default",className:"cursor-pointer hover:bg-primary/80 transition-colors",onClick:()=>{v(new Set),t&&t([])},children:[N.size," selected"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(j.z,{variant:"ghost",size:"icon",onClick:()=>{alert("Select one or more assemblies to see the related annotations; use right click to see the context menu")},children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})})]}),ea&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Filters:"}),C&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading submitters..."}),S&&(0,a.jsx)("div",{className:"text-sm text-red-500",children:S}),!C&&!S&&(0,a.jsxs)(V,{value:w||"all",onValueChange:e=>{_("all"===e?null:e),K(1)},children:[(0,a.jsx)(Y,{className:"w-48",children:(0,a.jsx)(J,{placeholder:"All submitters"})}),(0,a.jsxs)($,{className:"max-h-[300px] overflow-y-auto",children:[(0,a.jsx)(q,{value:"all",children:"All submitters"}),Object.entries(b).map(e=>{let[s,t]=e;return(0,a.jsxs)(q,{value:s,children:[s," (",t,")"]},s)})]})]})]}),(0,a.jsxs)(j.z,{variant:"outline",onClick:()=>{H("desc"===U?"asc":"desc"),K(1)},className:"gap-2",children:["desc"===U?(0,a.jsx)(D.Z,{className:"h-4 w-4"}):(0,a.jsx)(M.Z,{className:"h-4 w-4"}),"desc"===U?"Newest First":"Oldest First"]})]}),u&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground animate-in slide-in-from-top-2 fade-in duration-200",children:"Loading assemblies..."}),p&&(0,a.jsx)("div",{className:"text-sm text-red-500 animate-in slide-in-from-top-2 fade-in duration-200",children:p}),!u&&!p&&(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 animate-in slide-in-from-top-2 fade-in duration-200",children:[o.map(e=>{let s=N.has(e.assembly_accession);return(0,a.jsxs)(X,{children:[(0,a.jsx)(ee,{asChild:!0,children:(0,a.jsxs)("div",{onClick:()=>el(e.assembly_accession),className:"border rounded-lg p-4 flex justify-between align-center cursor-pointer transition-all duration-200 hover:shadow-md hover:border-primary/50 ".concat(s?"border-primary bg-primary/5 shadow-sm":"hover:bg-muted/30"),children:[(0,a.jsxs)("div",{className:"flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-mono text-md",children:e.assembly_name}),s&&(0,a.jsx)(d.C,{variant:"default",className:"ml-2 animate-in fade-in zoom-in duration-200",children:"Selected"})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:["taxon"===i&&(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(O.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"font-mono text-sm italic text-muted-foreground",children:e.organism_name})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"font-mono text-sm text-muted-foreground",children:e.assembly_accession})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.submitter})})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Annotations"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-primary",children:e.annotations_count})]})]})}),(0,a.jsxs)(es,{className:"w-56",children:[(0,a.jsxs)(et,{onClick:s=>{s.stopPropagation(),null==l||l(e.assembly_accession)},className:"gap-2",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View Assembly Details"})]}),(0,a.jsxs)(et,{onClick:s=>{s.stopPropagation(),null==r||r(e.assembly_accession)},className:"gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"View in Genome Browser"})]})]})]},e.assembly_accession)}),0===o.length&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground animate-in slide-in-from-top-2 fade-in duration-200",children:"No assemblies found for this organism."})]}),!u&&!p&&m>Q&&(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(W-1)*Q+1," to ",Math.min(W*Q,m)," of ",m," assemblies"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:()=>{K(e=>Math.max(1,e-1))},disabled:1===W,className:"gap-1",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[];if(er<=5)for(let s=1;s<=er;s++)e.push(s);else if(W<=3){for(let s=1;s<=4;s++)e.push(s);e.push("..."),e.push(er)}else if(W>=er-2){e.push(1),e.push("...");for(let s=er-3;s<=er;s++)e.push(s)}else e.push(1),e.push("..."),e.push(W-1),e.push(W),e.push(W+1),e.push("..."),e.push(er);return e})().map((e,s)=>"..."===e?(0,a.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},"ellipsis-".concat(s)):(0,a.jsx)(j.z,{variant:W===e?"default":"outline",size:"sm",onClick:()=>ei(e),className:"min-w-[2.5rem]",children:e},e))}),(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:()=>{K(e=>Math.min(er,e+1))},disabled:W===er,className:"gap-1",children:["Next",(0,a.jsx)(B.Z,{className:"h-4 w-4"})]})]})]})]})]})}et.displayName=K.ck.displayName,n.forwardRef((e,s)=>{let{className:t,children:n,checked:l,...r}=e;return(0,a.jsxs)(K.oC,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(K.wU,{children:(0,a.jsx)(U.Z,{className:"h-4 w-4"})})}),n]})}).displayName=K.oC.displayName,n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(K.Rk,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(K.wU,{children:(0,a.jsx)(Q.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=K.Rk.displayName,n.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(K.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold text-foreground",n&&"pl-8",t),...l})}).displayName=K.__.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(K.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-border",t),...n})}).displayName=K.Z0.displayName;var en=t(51817),el=t(49322);function er(e){let{searchTerm:s,className:t=""}=e,[l,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null);return((0,n.useEffect)(()=>{if(!s.trim()){r(null),c(null);return}(async()=>{o(!0),c(null);try{let e=await fetch("https://en.wikipedia.org/api/rest_v1/page/summary/".concat(encodeURIComponent(s)));if(!e.ok){if(404===e.status){c("No Wikipedia summary found"),r(null);return}throw Error("HTTP ".concat(e.status))}let t=await e.json();t.extract&&t.extract.trim().length>0?(r(t),c(null)):(c("No summary available"),r(null))}catch(e){console.error("Error fetching Wikipedia summary:",e),c("Failed to load Wikipedia summary"),r(null)}finally{o(!1)}})()},[s]),i)?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground ".concat(t),children:[(0,a.jsx)(en.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm",children:"Loading Wikipedia summary..."})]}):d?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground ".concat(t),children:[(0,a.jsx)(el.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:d})]}):l?(0,a.jsx)("div",{className:"border rounded-lg p-6 bg-muted/30",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[l.thumbnail&&(0,a.jsx)("img",{src:l.thumbnail.source,alt:l.title,className:"w-32 h-32 object-cover rounded-lg border flex-shrink-0",loading:"lazy"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-muted-foreground leading-relaxed text-sm",children:l.extract}),(0,a.jsxs)("a",{href:l.content_urls.desktop.page,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:text-primary/80 text-xs mt-2 transition-colors",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3"}),"Read more on Wikipedia"]})]})]})}):null}function ei(e){let{taxonDetails:s,onAssembliesSelectionChange:t,onTaxonChange:l,onAssemblySelect:r,onJBrowseChange:i}=e,[o,d]=(0,n.useState)([]),[c,m]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1);return s?((0,n.useEffect)(()=>{let e=async()=>{var e;m((await (e=s.taxid,(0,x.R1)("/taxons/".concat(encodeURIComponent(e),"/ancestors")))).results)};(async()=>{var e;d((await (e=s.taxid,(0,x.R1)("/taxons/".concat(encodeURIComponent(e),"/children")))).results)})(),e()},[s.taxid]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:s.scientific_name}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground italic",children:s.rank})]}),(0,a.jsx)("div",{className:"flex items-end justify-between gap-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"NCBI TaxID"}),(0,a.jsx)("div",{className:"font-mono text-sm text-muted-foreground",children:s.taxid})]})]})})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsxs)(j.z,{onClick:()=>h(!u),className:"gap-2",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),u?"Hide":"Show"," Taxonomic Hierarchy"]})})]}),(0,a.jsx)(er,{searchTerm:s.scientific_name||"",className:"mb-6"}),(0,a.jsx)(v,{open:u,onOpenChange:h,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(_,{children:(0,a.jsx)(k,{children:"Taxonomic Hierarchy"})}),(0,a.jsx)(L,{ancestors:c,currentTaxon:s,children:o,onTaxonClick:e=>{h(!1),null==l||l(e)}})]})}),(0,a.jsx)(ea,{taxid:s.taxid,onAssembliesSelectionChange:t,onAssemblySelect:r,onJBrowseChange:i,view:"taxon"})]})):(0,a.jsx)("div",{className:"text-muted-foreground",children:"Taxon not found"})}function eo(e){let{organismDetails:s,onAssembliesSelectionChange:t,onAssemblySelect:n,onJBrowseChange:l}=e;return s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:s.common_name||s.organism_name}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground italic",children:s.organism_name})]}),(0,a.jsx)("div",{className:"flex items-end justify-between gap-2",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"NCBI TaxID"}),(0,a.jsx)("div",{className:"font-mono text-sm text-muted-foreground",children:s.taxid})]})]})})]})}),(0,a.jsx)(er,{searchTerm:s.organism_name||"",className:"mb-6"}),(0,a.jsx)(ea,{taxid:s.taxid,onAssembliesSelectionChange:t,onAssemblySelect:n,onJBrowseChange:l,view:"organism"})]}):(0,a.jsx)("div",{className:"text-muted-foreground",children:"Organism not found"})}var ed=t(92735),ec=t(45016);function em(e){let{assemblyDetails:s,onJBrowseChange:t}=e,[l,r]=(0,n.useState)(!1),i=e=>Number(e).toLocaleString(),o=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),d=(e,s)=>e.includes("length")?s>1e9?"".concat(i(s/1e9)," Gb"):s>1e6?"".concat(i(s/1e6)," Mb"):s>1e3?"".concat(i(s/1e3)," Kb"):"".concat(i(s)," bp"):e.includes("percent")?"".concat(s,"%"):"genome_coverage"===e?"".concat(s,"x"):"atgc_count"===e||"gc_count"===e||"number"==typeof s?i(s):s.toString();return s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-2",children:s.assembly_name}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:s.organism_name})]}),(0,a.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Accession"}),(0,a.jsx)("div",{className:"font-mono text-sm text-muted-foreground",children:s.assembly_accession})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Release Date"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(s.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Submitter"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:s.submitter})]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(j.z,{onClick:()=>{null==t||t(s.assembly_accession)},className:"gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"View in Genome Browser"]}),(0,a.jsxs)(j.z,{onClick:()=>{let e=document.createElement("a");e.href=s.download_url,e.download="",e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",className:"gap-2 bg-transparent",children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4"}),"Download Assembly"]})]})]}),s.assembly_stats&&s.assembly_stats.total_number_of_chromosomes>0&&(0,a.jsxs)("div",{className:"border rounded-lg p-6 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center align-center mb-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold",children:"Chromosomes"}),(0,a.jsx)(j.z,{variant:"ghost",size:"icon",onClick:()=>{alert("Click on a chromosome to see the details")},children:(0,a.jsx)(R.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)(ec.Y,{accession:s.assembly_accession})]}),s.assembly_stats&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Assembly Statistics"}),(0,a.jsx)("div",{className:"grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-3 xs:grid-cols-1 gap-4",children:Object.entries(s.assembly_stats).slice(0,4).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:o(s)}),(0,a.jsx)("div",{className:"text-xl font-bold",children:d(s,t)})]},s)})}),l&&(0,a.jsx)("div",{className:"grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-3 xs:grid-cols-1 gap-4 mt-4 animate-in slide-in-from-top-4 fade-in duration-500",children:Object.entries(s.assembly_stats).slice(4).map((e,s)=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 animate-in slide-in-from-bottom-2 fade-in",style:{animationDelay:"".concat(50*s,"ms"),animationDuration:"400ms",animationFillMode:"both"},children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:o(t)}),(0,a.jsx)("div",{className:"text-xl font-bold",children:d(t,n)})]},t)})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)(j.z,{variant:"ghost",onClick:()=>{r(!l)},children:[l?(0,a.jsx)(F.Z,{className:"h-4 w-4"}):(0,a.jsx)(A.Z,{className:"h-4 w-4"}),l?"Show Less":"Show More"]})})]})]}):(0,a.jsx)("div",{className:"text-muted-foreground",children:"Assembly not found"})}function ex(e){let{filterType:s,filterObject:t,onClearFilter:n,onAssembliesSelectionChange:l,onTaxonChange:r,onJBrowseChange:i,onAssemblySelect:o}=e;return(0,a.jsxs)(g.Zb,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(d.C,{variant:"secondary",className:"capitalize",children:s})}),(0,a.jsx)(j.z,{variant:"ghost",size:"icon",onClick:n,children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]}),"taxon"===s&&(0,a.jsx)(ei,{taxonDetails:t,onAssembliesSelectionChange:l,onTaxonChange:r,onAssemblySelect:o,onJBrowseChange:i}),"organism"===s&&(0,a.jsx)(eo,{organismDetails:t,onAssembliesSelectionChange:l,onAssemblySelect:o,onJBrowseChange:i}),"assembly"===s&&(0,a.jsx)(em,{assemblyDetails:t,onJBrowseChange:i})]})}var eu=t(20271);let eh=eu.fC,ef=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eu.aV,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});ef.displayName=eu.aV.displayName;let ep=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eu.xz,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});ep.displayName=eu.xz.displayName;let eg=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eu.VY,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});eg.displayName=eu.VY.displayName;var ej=t(10866),eN=t(48736),ev=t(96215),eb=t(42488),ey=t(56421),ew=t(64935);function e_(e){let{stats:s,loading:t}=e;if(t)return(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(eb.Z,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading statistics..."})]})});if(!s)return(0,a.jsx)(g.Zb,{className:"p-12",children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,a.jsx)(z.Z,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No statistics available"})]})});let n=Object.entries(s.transcripts||{}).filter(e=>{let[s,t]=e;return t.total_count>0}).sort((e,s)=>s[1].total_count-e[1].total_count).slice(0,8);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,a.jsx)(eN.Z,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Annotations"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.annotations.total_count.toLocaleString()})]})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:(0,a.jsx)(ey.Z,{className:"h-5 w-5 text-blue-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Related Organisms"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.annotations.related_organisms_count.toLocaleString()})]})]})}),(0,a.jsx)(g.Zb,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500/10 rounded-lg",children:(0,a.jsx)(z.Z,{className:"h-5 w-5 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Related Assemblies"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:s.annotations.related_assemblies_count.toLocaleString()})]})]})})]}),s.genes&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(ew.Z,{className:"h-5 w-5"}),"Gene Statistics"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.genes.coding_genes&&(0,a.jsx)(eC,{title:"Coding Genes",stats:s.genes.coding_genes,color:"blue"}),s.genes.non_coding_genes&&(0,a.jsx)(eC,{title:"Non-coding Genes",stats:s.genes.non_coding_genes,color:"purple"}),s.genes.pseudogenes&&(0,a.jsx)(eC,{title:"Pseudogenes",stats:s.genes.pseudogenes,color:"orange"})]})]}),n.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(eN.Z,{className:"h-5 w-5"}),"Transcript Types"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(e=>{let[s,t]=e;return(0,a.jsx)(ek,{type:s,stats:t},s)})})]}),s.features&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(eb.Z,{className:"h-5 w-5"}),"Feature Statistics"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.features.cds&&(0,a.jsx)(eS,{title:"CDS",stats:s.features.cds,color:"green"}),s.features.exons&&(0,a.jsx)(eS,{title:"Exons",stats:s.features.exons,color:"blue"}),s.features.introns&&(0,a.jsx)(eS,{title:"Introns",stats:s.features.introns,color:"purple"})]})]})]})}function eC(e){let{title:s,stats:t,color:n}=e;return(0,a.jsxs)(g.Zb,{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"p-1.5 rounded ".concat({blue:"bg-blue-500/10 text-blue-500",purple:"bg-purple-500/10 text-purple-500",orange:"bg-orange-500/10 text-orange-500"}[n]),children:(0,a.jsx)(ey.Z,{className:"h-4 w-4"})}),(0,a.jsx)("h4",{className:"font-semibold",children:s})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Count"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:t.total_count.toLocaleString()})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mean Count"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:t.mean_count.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Median Count"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:t.median_count.toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mean Length"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[t.mean_length.toLocaleString()," bp"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Median Length"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[t.median_length.toLocaleString()," bp"]})]})]})]})]})}function ek(e){let{type:s,stats:t}=e;return(0,a.jsxs)(g.Zb,{className:"p-4 hover:shadow-md transition-shadow",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(d.C,{variant:"outline",className:"text-xs mb-1",children:s.replace(/_/g," ")})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:t.total_count.toLocaleString()})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Mean"}),(0,a.jsx)("p",{className:"font-medium",children:t.mean_count.toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Median"}),(0,a.jsx)("p",{className:"font-medium",children:t.median_count.toLocaleString()})]})]}),t.mean_length>0&&(0,a.jsxs)("div",{className:"pt-2 border-t",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avg Length"}),(0,a.jsxs)("p",{className:"text-sm font-medium",children:[t.mean_length.toLocaleString()," bp"]})]})]})]})}function eS(e){let{title:s,stats:t,color:n}=e;return(0,a.jsxs)(g.Zb,{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"p-1.5 rounded ".concat({green:"bg-green-500/10 text-green-500",blue:"bg-blue-500/10 text-blue-500",purple:"bg-purple-500/10 text-purple-500"}[n]),children:(0,a.jsx)(eb.Z,{className:"h-4 w-4"})}),(0,a.jsx)("h4",{className:"font-semibold",children:s})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mean Length"}),(0,a.jsxs)("p",{className:"text-lg font-bold",children:[t.mean_length.toLocaleString()," bp"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Median Length"}),(0,a.jsxs)("p",{className:"text-lg font-bold",children:[t.median_length.toLocaleString()," bp"]})]})]})]})}var ez=t(90740),eZ=t(86595);function eL(e){let{open:s,onOpenChange:t,biotypes:n,setBiotypes:l,featureTypes:r,setFeatureTypes:i,pipelines:o,setPipelines:c,providers:x,setProviders:u,source:h,setSource:f,mostRecentPerSpecies:p,setMostRecentPerSpecies:g,biotypeOptions:N,featureTypeOptions:b,pipelineOptions:y,providerOptions:C,sourceOptions:z,onFilterChange:Z,onClearAll:L,currentHitCount:F}=e,A=n.length>0||r.length>0||o.length>0||x.length>0||h&&"all"!==h||p;return(0,a.jsx)(v,{open:s,onOpenChange:t,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[80vh] flex flex-col",children:[(0,a.jsxs)(_,{children:[(0,a.jsxs)(k,{className:"flex items-center gap-2",children:[(0,a.jsx)(ez.Z,{className:"h-5 w-5"}),"Filter Annotations"]}),(0,a.jsx)(S,{children:"Apply filters to refine your annotation results. Filters affect both List and Statistics views."}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(d.C,{variant:0===F?"destructive":F<10?"secondary":"default",children:[F.toLocaleString()," result",1!==F?"s":""]})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2",children:[A&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border ".concat(0===F?"bg-destructive/10 border-destructive/20":"bg-primary/10 border-primary/20"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.C,{variant:0===F?"destructive":"default",className:"text-sm",children:[n.length+r.length+o.length+x.length+(h&&"all"!==h?1:0)+(p?1:0)," active"]}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(0===F?"text-destructive":"text-foreground"),children:[n.length+r.length+o.length+x.length+(h&&"all"!==h?1:0)+(p?1:0)," filter",n.length+r.length+o.length+x.length+(h&&"all"!==h?1:0)+(p?1:0)!==1?"s":""," applied",0===F&&" - No results found"]})]}),(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:L,className:"h-8",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Clear All"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Biotypes"}),(0,a.jsxs)(V,{value:"",onValueChange:e=>{e&&!n.includes(e)&&(l([...n,e]),Z())},children:[(0,a.jsx)(Y,{className:"h-9",children:(0,a.jsx)(J,{placeholder:"Add biotypes..."})}),(0,a.jsx)($,{className:"max-h-60",children:N.map(e=>(0,a.jsx)(q,{value:e,children:e},e))})]}),n.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:n.map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-1",children:[e,(0,a.jsx)("button",{onClick:()=>{l(n.filter(s=>s!==e)),Z()},className:"ml-2 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Feature Types"}),(0,a.jsxs)(V,{value:"",onValueChange:e=>{e&&!r.includes(e)&&(i([...r,e]),Z())},children:[(0,a.jsx)(Y,{className:"h-9",children:(0,a.jsx)(J,{placeholder:"Add feature types..."})}),(0,a.jsx)($,{className:"max-h-60",children:b.map(e=>(0,a.jsx)(q,{value:e,children:e},e))})]}),r.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-1",children:[e,(0,a.jsx)("button",{onClick:()=>{i(r.filter(s=>s!==e)),Z()},className:"ml-2 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Pipelines"}),(0,a.jsxs)(V,{value:"",onValueChange:e=>{e&&!o.includes(e)&&(c([...o,e]),Z())},children:[(0,a.jsx)(Y,{className:"h-9",children:(0,a.jsx)(J,{placeholder:"Add pipelines..."})}),(0,a.jsx)($,{className:"max-h-60",children:y.map(e=>(0,a.jsx)(q,{value:e,children:e},e))})]}),o.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-1",children:[e,(0,a.jsx)("button",{onClick:()=>{c(o.filter(s=>s!==e)),Z()},className:"ml-2 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Providers"}),(0,a.jsxs)(V,{value:"",onValueChange:e=>{e&&!x.includes(e)&&(u([...x,e]),Z())},children:[(0,a.jsx)(Y,{className:"h-9",children:(0,a.jsx)(J,{placeholder:"Add providers..."})}),(0,a.jsx)($,{className:"max-h-60",children:C.map(e=>(0,a.jsx)(q,{value:e,children:e},e))})]}),x.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-1",children:[e,(0,a.jsx)("button",{onClick:()=>{u(x.filter(s=>s!==e)),Z()},className:"ml-2 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Source"}),(0,a.jsxs)(V,{value:h,onValueChange:e=>{f(e),Z()},children:[(0,a.jsx)(Y,{className:"h-9",children:(0,a.jsx)(J,{placeholder:"All sources"})}),(0,a.jsxs)($,{className:"max-h-60",children:[(0,a.jsx)(q,{value:"all",children:"All Sources"}),z.map(e=>(0,a.jsx)(q,{value:e,children:e},e))]})]}),h&&"all"!==h&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-1",children:[h,(0,a.jsx)("button",{onClick:()=>{f("all"),Z()},className:"ml-2 hover:bg-destructive/20 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]})})]})]}),(0,a.jsx)("div",{className:"border-t pt-6",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Special Filters"}),(0,a.jsx)("div",{className:"border rounded-lg p-4 space-y-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(eZ.Z,{className:"h-4 w-4 ".concat(p?"text-primary fill-current":"text-muted-foreground")}),(0,a.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Most Recent per Species"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show only the most recent annotation for each species based on release date"})]}),(0,a.jsx)(j.z,{variant:p?"default":"outline",size:"sm",onClick:()=>{g(!p),Z()},className:"h-9",children:p?"On":"Off"})]})})]})})]})]})]})})}function eF(e){let{currentPage:s,totalPages:t,onPreviousPage:n,onNextPage:l,onPageClick:r}=e;return t<=1?null:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:n,disabled:1===s,className:"gap-1 h-9",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[];if(t<=5)for(let s=1;s<=t;s++)e.push(s);else if(s<=3){for(let s=1;s<=4;s++)e.push(s);e.push("..."),e.push(t)}else if(s>=t-2){e.push(1),e.push("...");for(let s=t-3;s<=t;s++)e.push(s)}else e.push(1),e.push("..."),e.push(s-1),e.push(s),e.push(s+1),e.push("..."),e.push(t);return e})().map((e,t)=>"..."===e?(0,a.jsx)("span",{className:"px-3 text-muted-foreground",children:"..."},"ellipsis-".concat(t)):(0,a.jsx)(j.z,{variant:s===e?"default":"outline",size:"sm",onClick:()=>r(e),className:"min-w-[2.5rem] h-9 ".concat(s===e?"shadow-sm":""),children:e},e))}),(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:l,disabled:s===t,className:"gap-1 h-9",children:["Next",(0,a.jsx)(B.Z,{className:"h-4 w-4"})]})]})})}var eA=t(84428),eR=t(7237);let eD=eR.fC,eM=eR.xz;eR.ZA,eR.Uv,eR.Tr,eR.Ee,n.forwardRef((e,s)=>{let{className:t,inset:n,children:l,...r}=e;return(0,a.jsxs)(eR.fF,{ref:s,className:(0,i.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...r,children:[l,(0,a.jsx)(B.Z,{className:"ml-auto"})]})}).displayName=eR.fF.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eR.tu,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}).displayName=eR.tu.displayName;let eO=n.forwardRef((e,s)=>{let{className:t,sideOffset:n=4,...l}=e;return(0,a.jsx)(eR.Uv,{children:(0,a.jsx)(eR.VY,{ref:s,sideOffset:n,className:(0,i.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...l})})});eO.displayName=eR.VY.displayName;let eE=n.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(eR.ck,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...l})});eE.displayName=eR.ck.displayName,n.forwardRef((e,s)=>{let{className:t,children:n,checked:l,...r}=e;return(0,a.jsxs)(eR.oC,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eR.wU,{children:(0,a.jsx)(U.Z,{className:"h-4 w-4"})})}),n]})}).displayName=eR.oC.displayName,n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,a.jsxs)(eR.Rk,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eR.wU,{children:(0,a.jsx)(Q.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=eR.Rk.displayName,n.forwardRef((e,s)=>{let{className:t,inset:n,...l}=e;return(0,a.jsx)(eR.__,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...l})}).displayName=eR.__.displayName;let eP=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eR.Z0,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});eP.displayName=eR.Z0.displayName;var eT=t(71533),eI=t(42208),eB=t(62720),eG=t(28124),eU=t(42042);function eV(e){var s,t,l,r,i,o,c,m,x,u,h,f,p,N,b,y,C,S,Z,L,R,D,M,O,E,P,T,I,B,G,U,V,J,Y,H,W,$,q,K,Q,X,ee,es;let{annotation:et,open:ea,onOpenChange:en}=e,[el,er]=(0,n.useState)({}),[ei,eo]=(0,n.useState)("coding_genes"),ed=e=>{er(s=>({...s,[e]:!s[e]}))},ec=e=>"object"==typeof e&&null!==e?void 0!==e.parsedValue?e.parsedValue.toString():void 0!==e.source?e.source.toString():e.toString():(null==e?void 0:e.toString())||"0";return(0,a.jsx)(v,{open:ea,onOpenChange:en,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[80vh] flex flex-col",children:[(0,a.jsx)(_,{children:(0,a.jsx)(k,{children:"Annotation Overview"})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2",children:[(0,a.jsxs)(g.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(z.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Source & File Overview"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Source Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Database"}),(0,a.jsx)(d.C,{variant:(null===(s=et.source_file_info)||void 0===s?void 0:s.database)==="GenBank"?"default":"secondary",children:(null===(t=et.source_file_info)||void 0===t?void 0:t.database)||"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Provider"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:(null===(l=et.source_file_info)||void 0===l?void 0:l.provider)||"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Pipeline"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:(null===(i=et.source_file_info)||void 0===i?void 0:null===(r=i.pipeline)||void 0===r?void 0:r.name)||"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Release Date"}),(0,a.jsx)("span",{className:"text-xs",children:(null===(o=et.source_file_info)||void 0===o?void 0:o.release_date)?new Date(et.source_file_info.release_date).toLocaleDateString():"Unknown"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"File Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"File Size"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:(null===(c=et.indexed_file_info)||void 0===c?void 0:c.file_size)?"".concat((et.indexed_file_info.file_size/1024/1024).toFixed(2)," MB"):"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Index Size"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:(null===(m=et.indexed_file_info)||void 0===m?void 0:m.csi_path)?"CSI Index Available":"Unknown"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Format"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:"GFF3 (gzipped, tabix indexed)"})]}),(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Processed At"}),(0,a.jsx)("span",{className:"text-xs",children:(null===(x=et.indexed_file_info)||void 0===x?void 0:x.processed_at)?new Date(et.indexed_file_info.processed_at).toLocaleDateString():"Unknown"})]})]})]})]})]}),(0,a.jsxs)(g.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(eB.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"Features Summary"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Biotypes"}),(null===(u=et.features_summary)||void 0===u?void 0:u.biotypes)&&et.features_summary.biotypes.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(el.biotypes?et.features_summary.biotypes:et.features_summary.biotypes.slice(0,10)).map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e)),et.features_summary.biotypes.length>10&&(0,a.jsx)(j.z,{variant:"outline",size:"sm",className:"text-xs h-6 px-2",onClick:()=>ed("biotypes"),children:el.biotypes?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"+",et.features_summary.biotypes.length-10," more"]})})]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No biotypes available"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Feature Types"}),(null===(h=et.features_summary)||void 0===h?void 0:h.types)&&et.features_summary.types.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(el.types?et.features_summary.types:et.features_summary.types.slice(0,10)).map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e)),et.features_summary.types.length>10&&(0,a.jsx)(j.z,{variant:"outline",size:"sm",className:"text-xs h-6 px-2",onClick:()=>ed("types"),children:el.types?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"+",et.features_summary.types.length-10," more"]})})]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No types available"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Sources"}),(null===(f=et.features_summary)||void 0===f?void 0:f.sources)&&et.features_summary.sources.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(el.sources?et.features_summary.sources:et.features_summary.sources.slice(0,10)).map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e)),et.features_summary.sources.length>10&&(0,a.jsx)(j.z,{variant:"outline",size:"sm",className:"text-xs h-6 px-2",onClick:()=>ed("sources"),children:el.sources?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"+",et.features_summary.sources.length-10," more"]})})]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No sources available"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Missing IDs"}),(null===(p=et.features_summary)||void 0===p?void 0:p.types_missing_id)&&et.features_summary.types_missing_id.length>0?(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(el.types_missing_id?et.features_summary.types_missing_id:et.features_summary.types_missing_id.slice(0,10)).map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e)),et.features_summary.types_missing_id.length>10&&(0,a.jsx)(j.z,{variant:"outline",size:"sm",className:"text-xs h-6 px-2",onClick:()=>ed("types_missing_id"),children:el.types_missing_id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"+",et.features_summary.types_missing_id.length-10," more"]})})]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No missing IDs"})]})]})]}),(0,a.jsxs)(g.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(ev.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("h4",{className:"text-sm font-semibold",children:"GFF Statistics"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Click a category to see details)"})]}),et.features_statistics?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[et.features_statistics.coding_genes&&(0,a.jsxs)("button",{onClick:()=>eo("coding_genes"),className:"text-left rounded-lg p-4 transition-all border-2 ".concat("coding_genes"===ei?"bg-primary/20 border-primary shadow-md":"bg-primary/10 border-transparent hover:border-primary/50 hover:shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(ew.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("h5",{className:"text-sm font-semibold text-primary",children:"Coding Genes"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===(N=et.features_statistics.coding_genes.count)||void 0===N?void 0:N.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(b=et.features_statistics.coding_genes.length_stats)||void 0===b?void 0:b.mean)," bp"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Transcripts:"}),(0,a.jsx)("span",{className:"font-mono",children:(null===(C=et.features_statistics.coding_genes.transcripts)||void 0===C?void 0:null===(y=C.count)||void 0===y?void 0:y.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Gene:"}),(0,a.jsx)("span",{className:"font-mono",children:ec(null===(S=et.features_statistics.coding_genes.transcripts)||void 0===S?void 0:S.per_gene)})]})]})]}),et.features_statistics.non_coding_genes&&(0,a.jsxs)("button",{onClick:()=>eo("non_coding_genes"),className:"text-left rounded-lg p-4 transition-all border-2 ".concat("non_coding_genes"===ei?"bg-secondary/20 border-secondary shadow-md":"bg-secondary/10 border-transparent hover:border-secondary/50 hover:shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(eG.Z,{className:"h-4 w-4 text-secondary"}),(0,a.jsx)("h5",{className:"text-sm font-semibold text-secondary",children:"Non-coding Genes"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===(Z=et.features_statistics.non_coding_genes.count)||void 0===Z?void 0:Z.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(L=et.features_statistics.non_coding_genes.length_stats)||void 0===L?void 0:L.mean)," bp"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Transcripts:"}),(0,a.jsx)("span",{className:"font-mono",children:(null===(D=et.features_statistics.non_coding_genes.transcripts)||void 0===D?void 0:null===(R=D.count)||void 0===R?void 0:R.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Gene:"}),(0,a.jsx)("span",{className:"font-mono",children:ec(null===(M=et.features_statistics.non_coding_genes.transcripts)||void 0===M?void 0:M.per_gene)})]})]})]}),et.features_statistics.pseudogenes&&(0,a.jsxs)("button",{onClick:()=>eo("pseudogenes"),className:"text-left rounded-lg p-4 transition-all border-2 ".concat("pseudogenes"===ei?"bg-accent/20 border-accent shadow-md":"bg-accent/10 border-transparent hover:border-accent/50 hover:shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(eU.Z,{className:"h-4 w-4 text-accent"}),(0,a.jsx)("h5",{className:"text-sm font-semibold text-accent",children:"Pseudogenes"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===(O=et.features_statistics.pseudogenes.count)||void 0===O?void 0:O.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(E=et.features_statistics.pseudogenes.length_stats)||void 0===E?void 0:E.mean)," bp"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Transcripts:"}),(0,a.jsx)("span",{className:"font-mono",children:(null===(T=et.features_statistics.pseudogenes.transcripts)||void 0===T?void 0:null===(P=T.count)||void 0===P?void 0:P.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Gene:"}),(0,a.jsx)("span",{className:"font-mono",children:ec(null===(I=et.features_statistics.pseudogenes.transcripts)||void 0===I?void 0:I.per_gene)})]})]})]})]}),et.features_statistics[ei]&&(0,a.jsxs)("div",{className:"space-y-6 p-4 bg-muted/30 rounded-lg border-2 border-dashed",children:[(null===(G=et.features_statistics[ei])||void 0===G?void 0:null===(B=G.transcripts)||void 0===B?void 0:B.types)&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h5",{className:"text-sm font-semibold",children:"Transcript Types"}),(0,a.jsxs)(d.C,{variant:"outline",className:"text-xs",children:[Object.keys(et.features_statistics[ei].transcripts.types).length," types"]})]}),function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=Object.entries(e),l=el[s]||!1,r=l?n:n.slice(0,t),i=n.length>t;return(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[r.sort((e,s)=>{let[,t]=e,[,a]=s;return Number(ec(a))-Number(ec(t))}).map(e=>{let[s,t]=e;return(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs",children:[s," (",ec(t),")"]},s)}),i&&(0,a.jsx)(j.z,{variant:"outline",size:"sm",className:"text-xs h-6 px-2",onClick:()=>ed(s),children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-1"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-1"}),"+",n.length-t," more"]})})]})}(Object.fromEntries(Object.entries(et.features_statistics[ei].transcripts.types).map(e=>{let[s,t]=e;return[s,t.count]})),"".concat(ei,"_transcript_types"),6)]}),(null===(U=et.features_statistics[ei])||void 0===U?void 0:U.features)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-sm font-semibold mb-3",children:"Features Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(null===(V=et.features_statistics[ei].features)||void 0===V?void 0:V.exons)&&(0,a.jsxs)("div",{className:"bg-background rounded-lg p-3 border",children:[(0,a.jsx)("h6",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Exons"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===(J=et.features_statistics[ei].features.exons.count)||void 0===J?void 0:J.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(Y=et.features_statistics[ei].features.exons.length_stats)||void 0===Y?void 0:Y.mean)," bp"]})]}),(null===(H=et.features_statistics[ei].features.exons.length_stats)||void 0===H?void 0:H.median)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Median:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(et.features_statistics[ei].features.exons.length_stats.median)," bp"]})]})]})]}),(null===(W=et.features_statistics[ei].features)||void 0===W?void 0:W.cds)&&(0,a.jsxs)("div",{className:"bg-background rounded-lg p-3 border",children:[(0,a.jsx)("h6",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"CDS"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===($=et.features_statistics[ei].features.cds.count)||void 0===$?void 0:$.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(q=et.features_statistics[ei].features.cds.length_stats)||void 0===q?void 0:q.mean)," bp"]})]}),(null===(K=et.features_statistics[ei].features.cds.length_stats)||void 0===K?void 0:K.median)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Median:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(et.features_statistics[ei].features.cds.length_stats.median)," bp"]})]})]})]}),(null===(Q=et.features_statistics[ei].features)||void 0===Q?void 0:Q.introns)&&(0,a.jsxs)("div",{className:"bg-background rounded-lg p-3 border",children:[(0,a.jsx)("h6",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Introns"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Count:"}),(0,a.jsx)("span",{className:"font-mono font-semibold",children:(null===(X=et.features_statistics[ei].features.introns.count)||void 0===X?void 0:X.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Length:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(null===(ee=et.features_statistics[ei].features.introns.length_stats)||void 0===ee?void 0:ee.mean)," bp"]})]}),(null===(es=et.features_statistics[ei].features.introns.length_stats)||void 0===es?void 0:es.median)&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Median:"}),(0,a.jsxs)("span",{className:"font-mono",children:[ec(et.features_statistics[ei].features.introns.length_stats.median)," bp"]})]})]})]})]})]})]})]}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No statistics available"})})]})]})]})})}function eJ(e){let{annotation:s,onJBrowseChange:t}=e,[l,r]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:()=>o(!0),children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4 mr-2"}),"Overview"]}),(0,a.jsxs)(eD,{children:[(0,a.jsx)(eM,{asChild:!0,children:(0,a.jsx)(j.z,{variant:"outline",size:"sm",children:(0,a.jsx)(eT.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)(eO,{align:"end",className:"w-48",children:[(0,a.jsxs)(eE,{onClick:()=>{null==t||t(s.assembly_accession,s.annotation_id)},children:[(0,a.jsx)(eI.Z,{className:"h-4 w-4 mr-2"}),"View in Genome Browser"]}),(0,a.jsx)(eP,{}),(0,a.jsxs)(eE,{onClick:()=>{let e=document.createElement("a");e.href="https://genome.crg.es/annotrieve/files/".concat(s.indexed_file_info.bgzipped_path),e.download="",e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4 mr-2"}),"Download File"]})]})]})]}),(0,a.jsx)(eV,{annotation:s,open:i,onOpenChange:o})]})}function eY(e){var s,t,n,l,r,i,o,c,m,x,u,h,f,p,j,N;let{annotation:v,onJBrowseChange:b,isSelected:y,onToggleSelection:w}=e,_=Object.entries(null!==(N=null===(s=v.features_summary)||void 0===s?void 0:s.root_types_counts)&&void 0!==N?N:{}).sort((e,s)=>s[1]-e[1]),C=(null===(n=v.features_summary)||void 0===n?void 0:null===(t=n.biotypes)||void 0===t?void 0:t.slice(0,4))||[],k=((null===(r=v.features_summary)||void 0===r?void 0:null===(l=r.biotypes)||void 0===l?void 0:l.length)||0)>4,S=null===(o=v.features_statistics)||void 0===o?void 0:null===(i=o.coding_genes)||void 0===i?void 0:i.count,z=null===(m=v.features_statistics)||void 0===m?void 0:null===(c=m.non_coding_genes)||void 0===c?void 0:c.count,Z=null===(u=v.features_statistics)||void 0===u?void 0:null===(x=u.pseudogenes)||void 0===x?void 0:x.count;return(0,a.jsxs)(g.Zb,{className:"group relative overflow-hidden transition-all duration-200 ".concat(y?"border-primary bg-primary/5 shadow-md":"border hover:border-primary/50 hover:shadow-lg hover:bg-muted/30"),children:[y&&(0,a.jsx)("div",{className:"absolute left-0 top-0 bottom-0 bg-primary"}),(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(d.C,{variant:"secondary",className:"text-xs font-semibold",children:v.source_file_info.database}),(0,a.jsx)(d.C,{variant:"accent",className:"text-xs",children:(null===(h=v.source_file_info.pipeline)||void 0===h?void 0:h.name)||v.source_file_info.provider}),(null===(f=v.source_file_info.pipeline)||void 0===f?void 0:f.version)&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["v",v.source_file_info.pipeline.version]})]}),(0,a.jsx)("h4",{className:"text-base italic font-semibold mb-1 group-hover:text-primary transition-colors",children:v.organism_name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"font-mono text-xs bg-muted/50 px-2 py-0.5 rounded",children:v.assembly_accession}),(0,a.jsx)("span",{className:"text-xs",children:v.assembly_name})]})]}),(void 0!==S||void 0!==z||void 0!==Z)&&(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2 bg-accent/5 rounded-lg border border-accent/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,a.jsx)(ey.Z,{className:"h-3.5 w-3.5 text-accent"}),(0,a.jsx)("span",{className:"font-medium",children:"Genes:"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[void 0!==S&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Coding"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-foreground",children:S.toLocaleString()})]}),void 0!==z&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Non-coding"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-foreground",children:z.toLocaleString()})]}),void 0!==Z&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Pseudo"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-foreground",children:Z.toLocaleString()})]})]})]}),_.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:_.map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 rounded-lg px-3 py-2.5 border border-border/50 hover:border-primary/30 transition-colors",children:[(0,a.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1 capitalize",children:s}),(0,a.jsx)("div",{className:"text-lg font-bold text-foreground",children:t.toLocaleString()})]},s)})}),C.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Biotypes:"}),C.map(e=>(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e},e)),k&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["+",((null===(j=v.features_summary)||void 0===j?void 0:null===(p=j.biotypes)||void 0===p?void 0:p.length)||0)-4," more"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground pt-2 border-t border-border/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(eA.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:function(e){let s=Math.floor(Math.log10(e)/3);return(e/Math.pow(1024,s)).toFixed(2)+" "+["B","KB","MB","GB","TB"][s]}(v.indexed_file_info.file_size)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(E.Z,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:new Date(v.source_file_info.release_date).toLocaleDateString()})]})]})]}),(0,a.jsx)("div",{className:"flex items-start pt-1",children:(0,a.jsx)(eJ,{annotation:v,onJBrowseChange:b})})]})})]})}var eH=t(81436),eW=t(44794),e$=t(6394);let eq=(0,t(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),eK=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(e$.f,{ref:s,className:(0,i.cn)(eq(),t),...n})});eK.displayName=e$.f.displayName;var eQ=t(9270);function eX(e){let{selectedAnnotations:s,onClearSelection:t,onRemoveItem:l}=e,[r,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!0),[x,u]=(0,n.useState)(!0),[h,f]=(0,n.useState)(1),p=s.reduce((e,s)=>e+("number"==typeof s.indexed_file_info.file_size?s.indexed_file_info.file_size:0),0)/1073741824,g=[],N=[],b=0;s.forEach(e=>{let s=("number"==typeof e.indexed_file_info.file_size?e.indexed_file_info.file_size:0)/1073741824;b+s>15&&N.length>0?(g.push(N),N=[e],b=s):(N.push(e),b+=s)}),N.length>0&&g.push(N);let y=new Set(s.map(e=>e.organism_name)),z=new Set(s.map(e=>e.assembly_name)),Z=Math.ceil(s.length/10),L=s.slice((h-1)*10,10*h),[F,A]=(0,n.useState)(new Map),R=async(e,t)=>{let a=e||s;a.reduce((e,s)=>e+("number"==typeof s.indexed_file_info.file_size?s.indexed_file_info.file_size:0),0);let n=a.map(e=>e.annotation_id),l=void 0!==t?"package-".concat(t):"all-selected";try{A(e=>new Map(e).set(l,"downloading"));let e=await (0,eH.$N)(n),s=new Blob([e],{type:"application/tar"}),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=void 0!==t?"annotations-package-".concat(t+1,".tar"):"selected-annotations.tar",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),A(e=>new Map(e).set(l,"downloaded"))}catch(e){console.error("Error downloading annotations:",e),A(e=>new Map(e).set(l,"idle"))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-4 max-w-2xl",children:(0,a.jsxs)("div",{className:"bg-primary text-primary-foreground rounded-lg shadow-lg border border-primary/20 px-6 py-4 flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eW.Z,{className:"h-5 w-5"}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 bg-primary-foreground text-primary text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center",children:s.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:"Download Cart"}),(0,a.jsxs)("div",{className:"text-xs opacity-90 flex items-center gap-1.5",children:[(0,a.jsx)(eA.Z,{className:"h-3 w-3"}),s.length," file",1!==s.length?"s":""," • ~",p.toFixed(2)," GB"]})]})]}),(0,a.jsx)("div",{className:"h-8 w-px bg-primary-foreground/20"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(j.z,{variant:"secondary",size:"sm",onClick:()=>{f(1),i(!0)},className:"bg-background text-foreground hover:bg-background/90 font-medium",children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4 mr-2"}),"Configure & Download"]}),(0,a.jsx)(j.z,{variant:"ghost",size:"sm",onClick:t,className:"hover:bg-primary-foreground/10 text-primary-foreground",title:"Clear cart",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(v,{open:r,onOpenChange:i,children:(0,a.jsxs)(w,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(_,{children:[(0,a.jsx)(k,{children:"Download Annotation Package"}),(0,a.jsxs)(S,{children:["Configure your download package with ",s.length," annotation",1!==s.length?"s":""," from ",y.size," organism",1!==y.size?"s":""," and ",z.size," assembl",1!==z.size?"ies":"y"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 py-4 pr-2",children:[g.length>1&&(0,a.jsxs)("div",{children:[(0,a.jsx)(eK,{className:"text-sm font-medium mb-3 block",children:"Download Packages"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mb-3",children:["Your selection has been split into ",g.length," packages (max 15GB each)"]}),(0,a.jsx)("div",{className:"grid gap-3",children:g.map((e,s)=>{let t=e.reduce((e,s)=>e+("number"==typeof s.indexed_file_info.file_size?s.indexed_file_info.file_size:0),0)/1073741824,n="package-".concat(s),l=F.get(n)||"idle";return(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-muted/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium text-sm",children:["Package ",s+1]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[e.length," file",1!==e.length?"s":""," • ",t.toFixed(2)," GB"]}),"downloaded"===l&&(0,a.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["✓ Downloaded as annotations-package-",s+1,".tar"]})]}),(0,a.jsx)(j.z,{size:"sm",onClick:()=>R(e,s),disabled:"downloading"===l,className:"h-8",children:"downloading"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-3 w-3 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Downloading..."]}):"downloaded"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{className:"h-3 w-3 mr-2"}),"Downloaded"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ed.Z,{className:"h-3 w-3 mr-2"}),"Download"]})})]})},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)(eK,{className:"text-sm font-medium",children:["Selected Files (",s.length,")"]}),Z>1&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===h,className:"h-7 w-7 p-0",children:(0,a.jsx)(I.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[h," / ",Z]}),(0,a.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>f(e=>Math.min(Z,e+1)),disabled:h===Z,className:"h-7 w-7 p-0",children:(0,a.jsx)(B.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"border rounded-lg p-4 max-h-64 overflow-y-auto space-y-2",children:L.map(e=>{let s="number"==typeof e.indexed_file_info.file_size?(e.indexed_file_info.file_size/1048576).toFixed(1):"0";return(0,a.jsxs)("div",{className:"flex items-start justify-between text-sm py-2 group hover:bg-muted/50 -mx-2 px-2 rounded transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,a.jsx)(d.C,{className:"text-xs shrink-0 mt-0.5",children:e.source_file_info.database}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-0.5",children:[(0,a.jsx)("div",{className:"font-medium text-sm italic truncate",children:e.organism_name}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsx)("span",{children:e.assembly_name})}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(E.Z,{className:"h-3 w-3 inline"}),(0,a.jsx)("span",{children:new Date(e.source_file_info.release_date).toLocaleDateString()})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 ml-2 shrink-0",children:[(0,a.jsxs)("span",{className:"text-xs text-muted-foreground whitespace-nowrap mt-1",children:[s," MB"]}),l&&(0,a.jsx)(j.z,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),l(e.annotation_id)},className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/10 hover:text-destructive",children:(0,a.jsx)(m.Z,{className:"h-3 w-3"})})]})]},e.annotation_id)})}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(eA.Z,{className:"h-4 w-4"}),"Total package size: ~",p.toFixed(2)," GB"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(eK,{className:"text-sm font-medium mb-3 block",children:"Archive Format"}),(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-muted/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(eW.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"TAR"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All annotations will be packaged in a tar archive format."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(eK,{className:"text-sm font-medium mb-3 block",children:"Additional Options"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 border rounded-lg p-3",children:[(0,a.jsx)(eQ.fC,{id:"index",checked:o,onCheckedChange:e=>c(!!e),className:"w-4 h-4 rounded border-2 border-primary data-[state=checked]:bg-primary data-[state=checked]:border-primary flex items-center justify-center",children:(0,a.jsx)(eQ.z$,{className:"text-primary-foreground",children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10 3L4.5 8.5L2 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})})}),(0,a.jsxs)(eK,{htmlFor:"index",className:"flex-1 cursor-pointer leading-relaxed",children:[(0,a.jsx)("div",{className:"font-medium",children:"Include CSI index files"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Include .csi index files for fast region queries (recommended)"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3 border rounded-lg p-3",children:[(0,a.jsx)(eQ.fC,{id:"metadata",checked:x,onCheckedChange:e=>u(!!e),className:"w-4 h-4 rounded border-2 border-primary data-[state=checked]:bg-primary data-[state=checked]:border-primary flex items-center justify-center",children:(0,a.jsx)(eQ.z$,{className:"text-primary-foreground",children:(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"currentColor",children:(0,a.jsx)("path",{d:"M10 3L4.5 8.5L2 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})})})}),(0,a.jsxs)(eK,{htmlFor:"metadata",className:"flex-1 cursor-pointer leading-relaxed",children:[(0,a.jsx)("div",{className:"font-medium",children:"Include metadata JSON"}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Include assembly and annotation metadata in JSON format"})]})]})]})]})]}),(0,a.jsxs)(C,{className:"border-t pt-4 mt-4",children:[(0,a.jsx)(j.z,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),1===g.length&&(0,a.jsx)(j.z,{onClick:()=>R(),disabled:"downloading"===F.get("all-selected"),children:"downloading"===F.get("all-selected")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Downloading..."]}):"downloaded"===F.get("all-selected")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"Downloaded"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ed.Z,{className:"h-4 w-4 mr-2"}),"Download All"]})})]})]})})]})}var e0=t(3011),e2=t(89134);let e1=(0,e0.U)()((0,e2.tJ)((e,s)=>({annotationsCart:new Map,toggleSelection:s=>{e(e=>{let t=new Map(e.annotationsCart),a=s.annotation_id;return t.has(a)?t.delete(a):t.set(a,s),{annotationsCart:t}})},addToCart:s=>{e(e=>{let t=new Map(e.annotationsCart);return t.set(s.annotation_id,s),{annotationsCart:t}})},removeFromCart:s=>{e(e=>{let t=new Map(e.annotationsCart);return t.delete(s),{annotationsCart:t}})},selectAll:s=>{e(e=>{let t=new Map(e.annotationsCart);return s.forEach(e=>{t.set(e.annotation_id,e)}),{annotationsCart:t}})},selectMostRecent:s=>{let t=new Map;s.forEach(e=>{let s=t.get(e.organism_name);(!s||new Date(e.source_file_info.last_modified)>new Date(s.source_file_info.last_modified))&&t.set(e.organism_name,e)}),e(e=>{let s=new Map(e.annotationsCart);return t.forEach(e=>{s.set(e.annotation_id,e)}),{annotationsCart:s}})},clearSelection:()=>{e({annotationsCart:new Map})},isSelected:e=>s().annotationsCart.has(e),getSelectedAnnotations:()=>Array.from(s().annotationsCart.values()),getSelectedIds:()=>new Set(s().annotationsCart.keys()),getSelectionCount:()=>s().annotationsCart.size,allSelected:e=>{let t=s().annotationsCart;return 0!==e.length&&e.every(e=>t.has(e.annotation_id))},someSelected:e=>{let t=s().annotationsCart,a=e.filter(e=>t.has(e.annotation_id)).length;return a>0&&a<e.length}}),{name:"selected-annotations-storage",partialize:e=>({annotationsCart:Array.from(e.annotationsCart.entries())}),onRehydrateStorage:()=>e=>{e&&Array.isArray(e.annotationsCart)&&(e.annotationsCart=new Map(e.annotationsCart))}}));function e4(e){let{filterType:s,filterObject:t,selectedAssemblyAccessions:l,onJBrowseChange:r}=e,[i,o]=(0,n.useState)([]),[c,x]=(0,n.useState)(0),[u,h]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[N,v]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[w,_]=(0,n.useState)([]),[C,k]=(0,n.useState)([]),[S,z]=(0,n.useState)("all"),[Z,L]=(0,n.useState)("none"),[F,A]=(0,n.useState)(!1),[R,O]=(0,n.useState)("none"),[E,P]=(0,n.useState)(!1),[T,I]=(0,n.useState)([]),[B,G]=(0,n.useState)([]),[U,V]=(0,n.useState)([]),[J,Y]=(0,n.useState)([]),[H,W]=(0,n.useState)([]),[$,q]=(0,n.useState)(1),[K]=(0,n.useState)(10),[Q,X]=(0,n.useState)(!1),{toggleSelection:ee,selectAll:es,clearSelection:et,removeFromCart:ea,isSelected:en,allSelected:el,someSelected:er,getSelectedAnnotations:ei,getSelectionCount:eo}=e1();(0,n.useEffect)(()=>{!async function(){try{let e=ed();F&&(e.latest_release_by="organism");let[s,t,a,n,l]=await Promise.all([(0,eH.rr)("biotype",e),(0,eH.rr)("feature_type",e),(0,eH.rr)("pipeline",e),(0,eH.rr)("provider",e),(0,eH.rr)("database",e)]);I(Object.keys(s).filter(e=>"no_value"!==e).sort()),G(Object.keys(t).filter(e=>"no_value"!==e).sort()),V(Object.keys(a).filter(e=>"no_value"!==e).sort()),Y(Object.keys(n).filter(e=>"no_value"!==e).sort()),W(Object.keys(l).filter(e=>"no_value"!==e).sort())}catch(e){console.error("Error fetching filter options:",e)}}()},[s,t,l,F]);let ed=()=>{let e={};return"organism"===s||"taxon"===s?(e={...e,taxids:null==t?void 0:t.taxid},l&&l.length>0&&(e={...e,assembly_accessions:l.join(",")})):"assembly"===s&&(e={...e,assembly_accessions:(null==t?void 0:t.assembly_accession)||(null==t?void 0:t.assemblyAccession)}),e};(0,n.useEffect)(()=>{!async function(){try{var e;let a=($-1)*K,n={limit:K,offset:a};"organism"===s||"taxon"===s?(n={...n,taxids:null==t?void 0:t.taxid},l&&l.length>0&&(n={...n,assembly_accessions:l.join(",")})):"assembly"===s&&(n={...n,assembly_accessions:(null==t?void 0:t.assembly_accession)||(null==t?void 0:t.assemblyAccession)}),N.length>0&&(n.biotypes=N.join(",")),b.length>0&&(n.feature_types=b.join(",")),w.length>0&&(n.pipelines=w.join(",")),C.length>0&&(n.providers=C.join(",")),S&&"all"!==S&&(n.db_sources=S),F&&(n.latest_release_by="organism");let r=await (0,eH.PR)(n),i=null==r?void 0:r.results;"none"!==Z&&(null==i?void 0:i.length)>0&&i.sort((e,s)=>{let t=new Date(e.source_file_info.release_date).getTime(),a=new Date(s.source_file_info.release_date).getTime();return"newest"===Z?a-t:t-a}),o(i),x(null!==(e=null==r?void 0:r.total)&&void 0!==e?e:0),p(!0);try{let e={...n};delete e.limit,delete e.offset;let s=await (0,eH.eh)(e);h(s)}catch(e){console.error("Error fetching stats:",e),h(null)}finally{p(!1)}}catch(e){o([]),h(null)}}()},[s,t,l,N,b,w,C,S,$,K,Z,F]);let ec=e=>{ee(e)},em=()=>{v([]),y([]),_([]),k([]),z("all"),A(!1),q(1)},ex=N.length>0||b.length>0||w.length>0||C.length>0||S&&"all"!==S||F,eu=Math.ceil(c/K);return(0,a.jsxs)("div",{className:"space-y-6 mt-10",children:[(0,a.jsx)(eL,{open:Q,onOpenChange:X,biotypes:N,setBiotypes:v,featureTypes:b,setFeatureTypes:y,pipelines:w,setPipelines:_,providers:C,setProviders:k,source:S,setSource:z,mostRecentPerSpecies:F,setMostRecentPerSpecies:A,biotypeOptions:T,featureTypeOptions:B,pipelineOptions:U,providerOptions:J,sourceOptions:H,onFilterChange:()=>{q(1)},onClearAll:em,currentHitCount:c}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-foreground",children:"Related Annotations"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(0,a.jsx)("span",{className:"font-semibold text-foreground",children:c.toLocaleString()})," annotation",1!==c?"s":""," found"]})]}),(0,a.jsxs)(j.z,{variant:"outline",size:"lg",onClick:()=>X(!0),className:"h-9 gap-2",children:[(0,a.jsx)(ej.Z,{className:"h-4 w-4"}),"Filters",ex&&(0,a.jsx)(d.C,{variant:"default",className:"ml-1 text-xs px-1.5 py-0.5",children:N.length+b.length+w.length+C.length+(S&&"all"!==S?1:0)+(F?1:0)})]})]}),ex&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Active:"}),S&&"all"!==S&&(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Source: ",S]}),N.slice(0,2).map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Biotype: ",e]},e)),N.length>2&&(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Biotypes: +",N.length-2," more"]}),b.slice(0,2).map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Feature: ",e]},e)),b.length>2&&(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Features: +",b.length-2," more"]}),w.slice(0,2).map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Pipeline: ",e]},e)),w.length>2&&(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Pipelines: +",w.length-2," more"]}),C.slice(0,2).map(e=>(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Provider: ",e]},e)),C.length>2&&(0,a.jsxs)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:["Providers: +",C.length-2," more"]}),F&&(0,a.jsx)(d.C,{variant:"secondary",className:"text-xs px-2 py-0.5",children:"Filter: Most Recent per Species"}),(0,a.jsxs)(j.z,{variant:"ghost",size:"sm",onClick:em,className:"h-6 text-xs text-muted-foreground hover:text-foreground",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),(0,a.jsxs)(eh,{defaultValue:"list",className:"w-full",children:[(0,a.jsx)("div",{className:"flex items-center mb-6",children:(0,a.jsxs)(ef,{className:"grid w-full max-w-md grid-cols-2 h-11",children:[(0,a.jsxs)(ep,{value:"list",className:"flex items-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[(0,a.jsx)(eN.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"List View"})]}),(0,a.jsxs)(ep,{value:"dashboard",className:"flex items-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Statistics"})]})]})}),(0,a.jsx)(eg,{value:"list",className:"space-y-4 mt-0",children:0===i.length?(0,a.jsx)(g.Zb,{className:"p-12 border-2 border-dashed",children:(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:[(0,a.jsx)(eN.Z,{className:"h-12 w-12 opacity-50 mx-auto mb-3"}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-foreground mb-2",children:"No Annotations Found"}),(0,a.jsx)("p",{className:"text-sm max-w-md mx-auto mb-4",children:"No annotations match your current filter criteria."}),ex&&(0,a.jsxs)(j.z,{variant:"outline",size:"sm",onClick:em,children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 p-3 bg-muted/30 rounded-lg border",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>{"none"===Z?L("newest"):"newest"===Z?L("oldest"):L("none")},className:"h-8 text-xs gap-1",children:"newest"===Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{className:"h-3 w-3"}),"Newest Release Date"]}):"oldest"===Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-3 w-3"}),"Oldest Release Date"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,{className:"h-3 w-3 opacity-50"}),"Sort By Release Date"]})})}),(0,a.jsx)(eF,{currentPage:$,totalPages:eu,onPreviousPage:()=>{q(e=>Math.max(1,e-1))},onNextPage:()=>{q(e=>Math.min(eu,e+1))},onPageClick:e=>{q(e)}})]}),(0,a.jsx)("div",{className:"grid gap-3",children:i.map(e=>(0,a.jsx)(eY,{onToggleSelection:()=>ec(e),isSelected:en(e.annotation_id),annotation:e,onJBrowseChange:r},e.annotation_id))})]})}),(0,a.jsx)(eg,{value:"dashboard",className:"mt-0",children:(0,a.jsx)(e_,{stats:u,loading:f})})]}),eo()>0&&(0,a.jsx)(eX,{selectedAnnotations:ei(),onClearSelection:()=>{et(),O("none")},onRemoveItem:ea})]})}var e5=t(36498);let e3=(0,n.forwardRef)((e,s)=>{var t;let{customClass:n,...l}=e;return(0,a.jsx)("div",{ref:s,...l,className:"absolute top-1/2 left-1/2 rounded-xl border border-white bg-black [transform-style:preserve-3d] [will-change:transform] [backface-visibility:hidden] ".concat(null!=n?n:""," ").concat(null!==(t=l.className)&&void 0!==t?t:"").trim()})});e3.displayName="Card";let e8=(e,s,t,a)=>({x:e*s,y:-e*t,z:-e*s*1.5,zIndex:a-e}),e6=(e,s,t)=>e5.ZP.set(e,{x:s.x,y:s.y,z:s.z,xPercent:-50,yPercent:-50,skewY:t,transformOrigin:"center center",zIndex:s.zIndex,force3D:!0});var e9=e=>{let{width:s=500,height:t=400,cardDistance:l=60,verticalDistance:r=70,delay:i=5e3,pauseOnHover:o=!1,onCardClick:d,skewAmount:c=6,easing:m="elastic",children:x}=e,[u,h]=(0,n.useState)(!1),f="elastic"===m?{ease:"elastic.out(0.6,0.9)",durDrop:2,durMove:2,durReturn:2,promoteOverlap:.9,returnDelay:.05}:{ease:"power1.inOut",durDrop:.8,durMove:.8,durReturn:.8,promoteOverlap:.45,returnDelay:.2},p=(0,n.useMemo)(()=>n.Children.toArray(x),[x]),g=(0,n.useMemo)(()=>p.map(()=>n.createRef()),[p.length]),j=(0,n.useRef)(Array.from({length:p.length},(e,s)=>s)),N=(0,n.useRef)(null),v=(0,n.useRef)(null),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{h(!0)},[]),(0,n.useEffect)(()=>{if(!u)return;let e=g.length;g.forEach((s,t)=>e6(s.current,e8(t,l,r,e),c));let s=()=>{if(j.current.length<2)return;let[e,...s]=j.current,t=g[e].current,a=e5.ZP.timeline();N.current=a,a.to(t,{y:"+=500",duration:f.durDrop,ease:f.ease}),a.addLabel("promote","-=".concat(f.durDrop*f.promoteOverlap)),s.forEach((e,s)=>{let t=g[e].current,n=e8(s,l,r,g.length);a.set(t,{zIndex:n.zIndex},"promote"),a.to(t,{x:n.x,y:n.y,z:n.z,duration:f.durMove,ease:f.ease},"promote+=".concat(.15*s))});let n=e8(g.length-1,l,r,g.length);a.addLabel("return","promote+=".concat(f.durMove*f.returnDelay)),a.call(()=>{e5.ZP.set(t,{zIndex:n.zIndex})},void 0,"return"),a.to(t,{x:n.x,y:n.y,z:n.z,duration:f.durReturn,ease:f.ease},"return"),a.call(()=>{j.current=[...s,e]})};if(s(),v.current=setInterval(s,i),o){let e=b.current;if(!e)return;let t=()=>{var e;null===(e=N.current)||void 0===e||e.pause(),v.current&&(clearInterval(v.current),v.current=null)},a=()=>{var e;null===(e=N.current)||void 0===e||e.play(),v.current=setInterval(s,i)};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",a),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",a),v.current&&(clearInterval(v.current),v.current=null)}}return()=>{v.current&&(clearInterval(v.current),v.current=null)}},[u,l,r,i,o,c,m,g,f]);let y=p.map((e,a)=>{var l;return(0,n.isValidElement)(e)?(0,n.cloneElement)(e,{key:a,ref:g[a],style:{width:s,height:t,...null!==(l=e.props.style)&&void 0!==l?l:{}},onClick:s=>{var t,n;null===(t=(n=e.props).onClick)||void 0===t||t.call(n,s),null==d||d(a)}}):e});return u?(0,a.jsx)("div",{ref:b,className:"absolute transform translate-x-[5%] translate-y-[20%] origin-bottom-right overflow-visible max-[768px]:translate-x-[25%] max-[768px]:translate-y-[25%] max-[768px]:scale-[0.75] max-[480px]:translate-x-[25%] max-[480px]:translate-y-[25%] max-[480px]:scale-[0.55]",style:{width:s,height:t,perspective:"900px"},children:y}):(0,a.jsx)("div",{className:"absolute transform translate-x-[5%] translate-y-[20%] origin-bottom-right overflow-visible max-[768px]:translate-x-[25%] max-[768px]:translate-y-[25%] max-[768px]:scale-[0.75] max-[480px]:translate-x-[25%] max-[480px]:translate-y-[25%] max-[480px]:scale-[0.55]",style:{width:s,height:t,perspective:"900px"}})},e7=t(29202),se=t(57358),ss=t(12196);function st(){return(0,a.jsx)("div",{className:"relative min-h-[600px] flex items-center justify-center overflow-hidden bg-primary/10",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-[50%_50%] gap-12 items-center",children:[(0,a.jsx)("div",{className:"space-y-8 flex flex-col justify-center",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-6xl font-semibold text-white mb-6 leading-tight",children:[(0,a.jsx)("span",{className:"text-accent",children:"Annotrieve"})," ",(0,a.jsx)("br",{}),"  Eukaryotic Genome Annotations in One Place                            "]}),(0,a.jsx)("p",{className:"text-2xl text-gray-300 leading-relaxed",children:"A unified interface for accessing GFF annotations from Ensembl and NCBI across all eukaryotic species."})]})}),(0,a.jsx)("div",{className:"relative h-[500px] hidden lg:flex lg:items-end lg:justify-start",children:(0,a.jsxs)(e9,{width:1e3,height:750,cardDistance:30,verticalDistance:40,delay:3e3,pauseOnHover:!1,easing:"linear",skewAmount:0,children:[(0,a.jsx)(e3,{className:"bg-black/50 border-gray-700 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-white",children:[(0,a.jsx)("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:(0,a.jsx)(z.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Unified Access"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 text-center",children:"NCBI RefSeq, GenBank, and Ensembl annotations in one place"})]})}),(0,a.jsx)(e3,{className:"bg-black/50 border-gray-700 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-white",children:[(0,a.jsx)("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:(0,a.jsx)(ed.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Download"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 text-center",children:"Download bgzipped annotations in GFF format                                    "})]})}),(0,a.jsx)(e3,{className:"bg-black/50 border-gray-700 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-white",children:[(0,a.jsx)("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:(0,a.jsx)(e7.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Explore"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 text-center",children:"Explore thousands of eukaryotic genomes, species, and their annotations"})]})}),(0,a.jsx)(e3,{className:"bg-black/50 border-gray-700 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-white",children:[(0,a.jsx)("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:(0,a.jsx)(se.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"JBrowse2 Integration"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 text-center",children:"Visualize annotations directly in the genome browser"})]})}),(0,a.jsx)(e3,{className:"bg-black/50 border-gray-700 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 text-white",children:[(0,a.jsx)("div",{className:"w-12 h-12 mb-4 flex items-center justify-center",children:(0,a.jsx)(ss.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Statistics Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-gray-300 text-center",children:"Gene counts, biotypes, and feature statistics"})]})})]})})]})})})}var sa=t(70525);function sn(e){let{onFilterSelect:s}=e,[t,l]=(0,n.useState)([]),[r,i]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async function(){try{var e,s,t;x(!0);let[a,n,r]=await Promise.all([u({sort_by:"annotations_count",sort_order:"desc",limit:5,offset:0}),(0,h.gG)({sort_by:"annotations_count",sort_order:"desc",limit:5,offset:0}),f({sort_by:"annotations_count",sort_order:"desc",rank:"class",limit:5,offset:0})]);l(null!==(e=a.results)&&void 0!==e?e:[]),i(null!==(s=n.results)&&void 0!==s?s:[]),c(null!==(t=r.results)&&void 0!==t?t:[])}catch(e){console.error("Error fetching top records:",e)}finally{x(!1)}})()},[]),m)?(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(en.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading most annotated records..."})]})})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto py-6",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-3",children:"Most Annotated Records"}),(0,a.jsx)("p",{className:"text-muted-foreground text-lg",children:"Explore the most annotated records available in the portal"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(ey.Z,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Top Organisms"})]}),(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>{var n;return(0,a.jsx)(g.Zb,{className:"p-4 hover:shadow-md transition-all cursor-pointer group hover:border-primary/50",onClick:()=>s("organism",e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)(d.C,{variant:"outline",className:"text-xs",children:["#",t+1]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground italic truncate",children:e.organism_name})]}),(0,a.jsx)("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:e.common_name||e.organism_name})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end flex-shrink-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-primary",children:null===(n=e.annotations_count)||void 0===n?void 0:n.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"annotations"})]})]})},e.taxid)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(sa.Z,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Top Taxonomic Groups (Classes)"})]}),(0,a.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>{var n;return(0,a.jsx)(g.Zb,{className:"p-4 hover:shadow-md transition-all cursor-pointer group hover:border-primary/50",onClick:()=>s("taxon",e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-1",children:(0,a.jsxs)(d.C,{variant:"outline",className:"text-xs",children:["#",t+1]})}),(0,a.jsx)("p",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:e.scientific_name})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end flex-shrink-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-primary",children:null===(n=e.annotations_count)||void 0===n?void 0:n.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"annotations"})]})]})},e.taxid)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(z.Z,{className:"w-5 h-5 text-primary"}),(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Top Genome Assemblies"})]}),(0,a.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>{var n;return(0,a.jsx)(g.Zb,{className:"p-4 hover:shadow-md transition-all cursor-pointer group hover:border-primary/50",onClick:()=>s("assembly",e),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)(d.C,{variant:"outline",className:"text-xs",children:["#",t+1]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.assembly_accession})]}),(0,a.jsx)("p",{className:"font-medium text-sm group-hover:text-primary transition-colors truncate",children:e.assembly_name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground italic mt-0.5 truncate",children:e.organism_name})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end flex-shrink-0",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-primary",children:null===(n=e.annotations_count)||void 0===n?void 0:n.toLocaleString()}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"annotations"})]})]})},e.assembly_accession)})})]})]})]})}function sl(){let[e,s]=(0,n.useState)(null),[t,i]=(0,n.useState)(null),[o,d]=(0,n.useState)([]),c=(e,t)=>{s(e),i(t)},m=async e=>{try{let t=await (0,x.R1)("/taxons/".concat(encodeURIComponent(e)));s("taxon"),i(t),d([])}catch(e){console.error("Failed to fetch taxon:",e)}},u=(e,s)=>{let t=new URLSearchParams({accession:e});s&&t.set("annotationId",s),window.location.href="/jbrowse?".concat(t.toString())},f=async e=>{try{let t=await (0,h.lP)(e);s("assembly"),i(t),d([])}catch(e){console.error("Failed to fetch assembly:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)("header",{className:"border-b bg-card sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"flex items-center py-4",children:[(0,a.jsx)("div",{className:"px-6",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-foreground whitespace-nowrap",children:"Annotrieve"})}),(0,a.jsx)("div",{className:"flex-1 container mx-auto px-4",children:(0,a.jsx)(p,{onFilterSelect:c})}),(0,a.jsxs)("nav",{className:"flex items-center gap-6 px-6",children:[(0,a.jsx)(l.default,{href:"/faqs",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:"FAQs"}),(0,a.jsx)(l.default,{href:"/api-docs",className:"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors",children:"API"}),(0,a.jsx)("a",{href:"https://github.com/emiliorighi/annotrieve",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})})]})]})}),(0,a.jsx)("main",{className:"flex-1",children:e&&t?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[(0,a.jsx)(ex,{filterType:e,filterObject:t,onClearFilter:()=>{s(null),i(null),d([])},onAssembliesSelectionChange:e=>{d(e)},onTaxonChange:m,onJBrowseChange:u,onAssemblySelect:f}),(0,a.jsx)(e4,{filterType:e,filterObject:t,selectedAssemblyAccessions:o,onJBrowseChange:u})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(st,{}),(0,a.jsx)(sn,{onFilterSelect:c})]})})]})}}},function(e){e.O(0,[922,8688,2726,172,1233,4766,2971,2117,1744],function(){return e(e.s=11933)}),_N_E=e.O()}]);