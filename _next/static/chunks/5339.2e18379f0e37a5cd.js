"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5339],{57095:function(e,t,r){var a=r(57437),n=r(42382),i=r(12051),l=r(25122),s=r(47198);let o=(0,r(3905).makeStyles)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}}),d=(0,s.observer)(function({model:e,slice:t,region:r}){let i=(0,l.Z)(),{radiusPx:s}=e,o=s+1,{endRadians:d,startRadians:c}=t,m=(0,n.polarToCartesian)(o,c),x=(0,n.polarToCartesian)(o,d),g=(d-c)*o,u=d-c>Math.PI?"1":"0",p=`[${Number(r.regions.length).toLocaleString()}]`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{text:p,view:e,maxWidthPx:g,radians:(d+c)/2,radiusPx:o,title:`${p} more regions`,color:i.palette.text.primary}),(0,a.jsx)("path",{d:["M",...m,"A",o,o,"0",u,"1",...x].join(" "),...(0,n.getStrokeProps)(i.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})}),h=(0,s.observer)(function({view:e,text:t,maxWidthPx:r,radians:i,radiusPx:l,title:s,color:d}){let{classes:h}=o(),c=(0,n.polarToCartesian)(l+5,i);return t?6.5*t.length<r?(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"middle",dominantBaseline:"middle",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)+90})`,...(0,n.getFillProps)(d),children:[t,(0,a.jsx)("title",{children:s||t})]}):r>4?(0,n.radToDeg)(i+e.offsetRadians-Math.PI/2)>=180?(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)})`,fill:d,children:[t,(0,a.jsx)("title",{children:s||t})]}):(0,a.jsxs)("text",{x:0,y:0,className:h.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${c}) rotate(${(0,n.radToDeg)(i)+180})`,fill:d,children:[t,(0,a.jsx)("title",{children:s||t})]}):null:null}),c=(0,s.observer)(function({model:e,slice:t,region:r}){let s=(0,l.Z)(),{radiusPx:o}=e,{endRadians:d,startRadians:c}=t,m=(0,n.getSession)(e).assemblyManager.get(r.assemblyName),x=m?m.getRefNameColor(r.refName):void 0;if(x)try{x=(0,i.makeContrasting)(x,s.palette.background.paper)}catch(e){x=s.palette.text.primary}else x=s.palette.text.primary;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{text:r.refName,view:e,maxWidthPx:(d-c)*o,radians:(d+c)/2,radiusPx:o,color:x}),(0,a.jsx)("path",{d:function(e,t,r,a){e.flipped&&([r,a]=[a,r]);let n=e.bpToXY(r,t),i=e.bpToXY(a,t);return["M",...n,"A",t,t,"0",Math.abs(a-r)/e.bpPerRadian>Math.PI?"1":"0","1",...i].join(" ")}(t,o+1,r.start,r.end),stroke:x,strokeWidth:2,fill:"none"})]})}),m=(0,s.observer)(function({model:e,slice:t}){return t.region.elided?(0,a.jsx)(d,{model:e,region:t.region,slice:t},(0,n.assembleLocString)(t.region.regions[0])):(0,a.jsx)(c,{region:t.region,model:e,slice:t},(0,n.assembleLocString)(t.region))});t.Z=m},15339:function(e,t,r){r.d(t,{renderToSvg:function(){return m}});var a=r(57437),n=r(2265),i=r(98833),l=r(42382),s=r(11588),o=r(74679),d=r(25122);function h({width:e,height:t,shift:r}){let n=(0,d.Z)();return(0,a.jsx)("rect",{width:e+2*r,height:t,fill:(0,l.stripAlpha)(n.palette.background.default)})}var c=r(57095);async function m(e,t){var r;await (0,o.when)(()=>e.initialized);let{themeName:d="default",Wrapper:m=({children:e})=>e}=t,x=(0,l.getSession)(e),g=null===(r=x.allThemes)||void 0===r?void 0:r.call(x)[d],{width:u,tracks:p,height:f}=e,j=await Promise.all(p.map(async e=>{let r=e.displays[0];return await (0,o.when)(()=>void 0===r.ready||r.ready),{track:e,result:await r.renderSvg({...t,theme:g})}})),{staticSlices:w,offsetRadians:b,centerXY:v}=e,y=(0,l.radToDeg)(b);return(0,l.renderToStaticMarkup)((0,a.jsx)(s.Z,{theme:(0,i.createJBrowseTheme)(g),children:(0,a.jsx)(m,{children:(0,a.jsxs)("svg",{width:u,height:f,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,u+100,f].toString(),children:[(0,a.jsx)(h,{width:u,height:f,shift:50}),(0,a.jsxs)("g",{transform:`translate(${v}) rotate(${y})`,children:[w.map((t,r)=>(0,a.jsx)(c.Z,{model:e,slice:t},r)),j.map(({result:e},t)=>(0,a.jsx)(n.Fragment,{children:e},t))]})]})})}))}}}]);