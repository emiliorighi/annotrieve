"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7914],{2906:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var l=n(57437),r=n(15219),s=n.n(r),a=n(42382),i=n(2265),o=n(98833),u=n(90658),c=n(20767),f=n(60288);async function d({view:e,feature:t}){var n;let{assemblyManager:l}=(0,a.getSession)(e),r=t.get("CIGAR"),s=t.get("strand"),i=(null===(n=t.get("tags"))||void 0===n?void 0:n.SA)||"",o=t.get("name"),u=(0,f.sB)(r,1),c=await l.waitForAssembly(e.assemblyNames[0]);if(!c)throw Error("assembly not found");let d=(0,f.Y1)(i,t.id(),s,o,!0),m=t.toJSON();m.clipPos=u,m.strand=1,m.mate={refName:o,start:u,end:u+(0,f.I8)(r)};let h=[m,...d];for(let[e,t]of h.entries())t.refName=c.getCanonicalRefName(t.refName)||t.refName,t.syntenyId=e,t.mate.syntenyId=e,t.mate.uniqueId=`${t.uniqueId}_mate`;return h.sort((e,t)=>e.clipPos-t.clipPos),h}let m=(0,i.lazy)(()=>n.e(5011).then(n.bind(n,5011))),h=(0,i.lazy)(()=>n.e(2102).then(n.bind(n,62102)));function p({model:e,feature:t}){let{view:n}=e,[r,s]=(0,i.useState)(),[c,f]=(0,i.useState)();(0,i.useEffect)(()=>{(async()=>{try{let e=await d({view:n,feature:new a.SimpleFeature(t)});s(e)}catch(e){f(e),console.error(e)}})()},[t,n]);let m=[];if(r)for(let e=0;e<r.length-1;e++)m.push([r[e],r[e+1]]);return m.length?(0,l.jsxs)("div",{children:[(0,l.jsx)(u.Z,{children:"Launch split view"}),c?(0,l.jsx)(o.ErrorMessage,{error:c}):null,(0,l.jsx)("ul",{children:m.map((t,n)=>{let[r,s]=t;return(0,l.jsxs)("li",{children:[r.refName,":",(0,a.toLocale)(1===r.strand?r.end:r.start)," ->"," ",s.refName,":",(0,a.toLocale)(1===s.strand?s.start:s.end)," ",(0,l.jsx)(g,{model:e,f1:r,f2:s})," ",(0,l.jsx)(y,{model:e,f1:r,f2:s})]},`${JSON.stringify(t)}-${n}`)})})]}):null}function g({model:e,f1:t,f2:n}){return(0,l.jsx)(c.Z,{href:"#",onClick:l=>{l.preventDefault();let r=(0,a.getSession)(e);r.queueDialog(l=>[m,{handleClose:l,session:r,feature:new a.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(top/bottom)"})}function y({model:e,f1:t,f2:n}){return(0,l.jsx)(c.Z,{href:"#",onClick:l=>{l.preventDefault();let r=(0,a.getSession)(e);r.queueDialog(l=>[h,{handleClose:l,session:r,feature:new a.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}])},children:"(single row)"})}var w=n(40741);function v({tag:e,model:t}){return(0,l.jsxs)("div",{children:[(0,l.jsx)(u.Z,{children:"List of supplementary alignment locations"}),(0,l.jsx)("ul",{children:e.split(";").filter(e=>!!e).map((e,n)=>{let[r,s,a,i]=e.split(","),o=(0,f.Zr)(i),u=Math.floor(o/5),d=+s,m=+s+o,h=`${r}:${Math.max(1,d-u)}-${m+u}`,p=d.toLocaleString("en-US"),g=m.toLocaleString("en-US"),y=`${r}:${p}-${g} (${a}) [${o}bp]`;return(0,l.jsx)("li",{children:(0,l.jsx)(c.Z,{href:"#",onClick:async e=>{e.preventDefault(),(0,w.V)(h,t)},children:y})},`${h}-${n}`)})})]})}function x(e){let{model:t,tag:n,feature:r}=e,i=(0,a.getSession)(t),{pluginManager:o}=(0,a.getEnv)(i),u=!1;try{u=!!o.getViewType("BreakpointSplitView")}catch(e){}return(0,l.jsxs)(s(),{...e,title:"Supplementary alignments",children:[(0,l.jsx)(v,{model:t,tag:n}),u?(0,l.jsx)(p,{model:t,feature:r}):null]})}}}]);