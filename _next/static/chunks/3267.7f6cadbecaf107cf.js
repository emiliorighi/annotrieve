"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3267],{23267:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var o=n(57437),a=n(18360),r=n.n(a),s=n(42382),i=n(63168),l=n(2265),c=n(12799),f=n.n(c),u=n(15219),d=n.n(u),m=n(87290),g=n(47198),j=n(3905),b=n(98833);function x({config:e}){let[t,n]=(0,l.useState)(),[a,r]=(0,l.useState)(),{rpcManager:i}=(0,s.getSession)(e);(0,l.useEffect)(()=>{(async()=>{try{let t=(0,m.readConfObject)(e,"adapter"),n=await i.call(e.trackId,"CoreGetInfo",{adapterConfig:t});r(n)}catch(e){console.error(e),n(e)}})()},[e,i]);let c="string"==typeof a?{header:`<pre>${a.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:a||{};return(0,o.jsx)(d(),{title:"File info",children:t?(0,o.jsx)(b.ErrorMessage,{error:t}):void 0===a?(0,o.jsx)(b.LoadingEllipses,{message:"Loading file data"}):(0,o.jsx)(f(),{attributes:c})})}var h=n(77639),p=n(49211),C=n.n(p);let y=(0,j.makeStyles)()({button:{float:"right"}});var S=function({conf:e,setShowRefNames:t}){let[n,a]=(0,l.useState)(!1),{classes:r}=y();return(0,o.jsxs)("span",{className:r.button,children:[(0,o.jsx)(h.Z,{variant:"contained",color:"secondary",onClick:()=>{t(!0)},children:"Show ref names"}),(0,o.jsx)(h.Z,{variant:"contained",onClick:()=>{let t=function e(t,n){for(let o in t)o===n?delete t[o]:"object"==typeof t[o]&&e(t[o],n);return t}(structuredClone(e),"baseUri");C()(JSON.stringify(t,null,2)),a(!0),setTimeout(()=>{a(!1)},1e3)},children:n?"Copied to clipboard!":"Copy config"})]})},v=n(17725);let k=(0,j.makeStyles)()(e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}})),N=(0,g.observer)(function({config:e,onClose:t}){let{classes:n}=k(),[a,r]=(0,l.useState)(),[c,f]=(0,l.useState)(),[u,d]=(0,l.useState)(!1),{rpcManager:g}=(0,s.getSession)(e);(0,l.useEffect)(()=>{(async()=>{try{let t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map(async t=>{let n=(0,m.readConfObject)(e,"adapter");return[t,await g.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]}));f(Object.fromEntries(t))}catch(e){console.error(e),r(e)}})()},[e,g]);let j=c?Object.entries(c):[],x=j.flatMap(([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`
Too many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""]).filter(e=>!!e).join("\n");return(0,o.jsx)(b.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl",children:(0,o.jsx)(v.Z,{className:n.container,children:a?(0,o.jsx)(b.ErrorMessage,{error:a}):void 0===c?(0,o.jsx)(b.LoadingEllipses,{message:"Loading refNames"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.Z,{variant:"contained",onClick:()=>{C()(j.flatMap(([e,t])=>[`--- ${e} ---`,...t]).filter(e=>!!e).join("\n")),d(!0),setTimeout(()=>{d(!1)},1e3)},children:u?"Copied to clipboard!":"Copy ref names"}),(0,o.jsx)("pre",{className:n.refNames,children:x})]})})})}),E=(0,j.makeStyles)()({content:{minWidth:800}}),w=(0,g.observer)(function({config:e}){let t=(0,m.readConfObject)(e),n=(0,s.getSession)(e),{classes:a}=E(),[r,i]=(0,l.useState)(!1),c=(0,m.getConf)(n,["formatAbout","hideUris"])||(0,m.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:u}=(0,s.getEnv)(n),g=function({config:e,pluginManager:t}){let n=(0,s.getSession)(e),o=(0,m.readConfObject)(e);return t.evaluateExtensionPoint("Core-customizeAbout",{config:{...o,...(0,m.getConf)(n,["formatAbout","config"],{config:o}),...(0,m.readConfObject)(e,["formatAbout","config"],{config:o})}},{session:n,config:e})}({config:e,pluginManager:u}),j=u.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:n,config:e}),b=["displays","baseUri","refNames","formatAbout"];return(0,o.jsxs)("div",{className:a.content,children:[(0,o.jsxs)(d(),{title:"Configuration",children:[c?null:(0,o.jsx)(S,{conf:t,setShowRefNames:i}),(0,o.jsx)(f(),{attributes:g.config,omit:[...b,"metadata"],hideUris:c})]}),g.config.metadata?(0,o.jsx)(d(),{title:"Metadata",children:(0,o.jsx)(f(),{attributes:g.config.metadata,omit:b,hideUris:c})}):null,j?(0,o.jsx)(d(),{title:j.name,children:(0,o.jsx)(j.Component,{config:e})}):null,(0,o.jsx)(x,{config:e}),r?(0,o.jsx)(N,{config:e,onClose:()=>{i(!1)}}):null]})});function A({config:e,handleClose:t}){let n=(0,s.getSession)(e),a=(0,i.getTrackName)(e,n),{pluginManager:l}=(0,s.getEnv)(n),c=l.evaluateExtensionPoint("Core-replaceAbout",w,{session:n,config:e});return(0,o.jsx)(r(),{open:!0,onClose:t,title:a,maxWidth:"xl",children:(0,o.jsx)(c,{config:e})})}}}]);