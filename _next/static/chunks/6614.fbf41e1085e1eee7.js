"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6614],{5835:function(e,t,a){t.W=function(e,t,a=()=>{}){let n=new TextDecoder("utf8"),s=0,l=0;for(;s<e.length;){let i=e.indexOf(10,s),c=-1===i?e.length:i,u=e.subarray(s,c),o=n.decode(u).trim();if(o&&!1===t(o,l))break;l++%1e4==0&&a(`Loading ${(0,r.getProgressDisplayStr)(s,e.length)}`),s=c+1}};let r=a(42382)},26614:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(29707),n=a(77207),s=a(42382),l=a(61795),i=a(52427),c=a(12307),u=a(61338),o=a(82073),f=a(5835);class d extends n.BaseFeatureDataAdapter{constructor(){super(...arguments),this.calculatedIntervalTreeMap={}}async loadDataP(e){let{statusCallback:t=()=>{}}=e||{},{header:a,featureMap:n}=function(e,t=()=>{}){let a=[],r={};return(0,f.W)(e,e=>{if(e.startsWith("#"))a.push(e);else{if(e.startsWith(">"))return!1;let t=e.indexOf("	"),a=e.slice(0,t);r[a]||(r[a]=""),r[a]+=`${e}
`}return!0},t),{header:a.join("\n"),featureMap:r}}(await (0,s.fetchAndMaybeUnzip)((0,l.openLocation)(this.getConf("gffLocation"),this.pluginManager),e),t);return{header:a,intervalTreeMap:Object.fromEntries(Object.entries(n).map(([e,t])=>[e,a=>{if(!this.calculatedIntervalTreeMap[e]){null==a||a("Parsing GFF data");let n=new r.ZP;for(let a of(0,u.X)(t).flat().map((t,a)=>new c.default({data:(0,o.P)(t),id:`${this.id}-${e}-${a}`})))n.insert([a.get("start"),a.get("end")],a);this.calculatedIntervalTreeMap[e]=n}return this.calculatedIntervalTreeMap[e]}]))}}async loadData(e){return this.gffFeatures||(this.gffFeatures=this.loadDataP(e).catch(e=>{throw this.gffFeatures=void 0,e})),this.gffFeatures}async getRefNames(e={}){let{intervalTreeMap:t}=await this.loadData(e);return Object.keys(t)}async getHeader(e={}){let{header:t}=await this.loadData(e);return t}getFeatures(e,t={}){return(0,i.ObservableCreate)(async a=>{var r;try{let{start:n,end:s,refName:l}=e,{intervalTreeMap:i}=await this.loadData(t);for(let e of(null===(r=i[l])||void 0===r?void 0:r.call(i,t.statusCallback).search([n,s]))||[])a.next(e);a.complete()}catch(e){a.error(e)}},t.stopToken)}}}}]);