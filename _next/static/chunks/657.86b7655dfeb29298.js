"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[657],{20657:function(e,l,n){n.r(l),n.d(l,{default:function(){return Z}});var t=n(57437),i=n(2265),o=n(13889),r=n.n(o),s=n(42382),a=n(17725),c=n(77639),d=n(17764),h=n(3905),u=n(98833),m=n(14478),x=n.n(m),g=n(93982),f=n(50797),j=n(20168),p=n(79916),C=n(28729),b=n(24272);let w=(0,h.makeStyles)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});var k=function({rows:e,onChange:l,showTips:n}){let{classes:o}=w(),[r,a]=(0,i.useState)(null),[d,h]=(0,i.useState)([]),{name:k,color:v,baseUri:S,...Z}=e[0],[M,y]=(0,i.useState)("blue"),[N,T]=(0,i.useState)({idx:0,field:null});return(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Z,{disabled:!d.length,onClick:e=>{a(e.currentTarget)},children:"Change color of selected items"}),(0,t.jsxs)(c.Z,{disabled:!d.length,onClick:()=>{l((0,b.A1)([...e],d))},children:[(0,t.jsx)(f.Z,{}),n?"Move selected items up":null]}),(0,t.jsxs)(c.Z,{disabled:!d.length,onClick:()=>{l((0,b.vi)([...e],d))},children:[(0,t.jsx)(g.Z,{}),n?"Move selected items down":null]}),(0,t.jsxs)(c.Z,{disabled:!d.length,onClick:()=>{l((0,b.A1)([...e],d,e.length))},children:[(0,t.jsx)(p.Z,{}),n?"Move selected items to top":null]}),(0,t.jsxs)(c.Z,{disabled:!d.length,onClick:()=>{l((0,b.vi)([...e],d,e.length))},children:[(0,t.jsx)(j.Z,{}),n?"Move selected items to bottom":null]}),(0,t.jsx)(m.ColorPopover,{anchorEl:r,color:M,onChange:n=>{for(let l of(y(n),d)){let t=e.find(e=>e.name===l);t&&(t.color=n)}l([...e])},onClose:()=>{a(null)}}),(0,t.jsx)("div",{style:{height:400,width:"100%"},children:(0,t.jsx)(C._,{disableRowSelectionOnClick:!0,getRowId:e=>e.name,checkboxSelection:!0,onRowSelectionModelChange:e=>{h([...e.ids])},rows:e,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:n,id:i})=>(0,t.jsx)(x(),{color:n||"blue",onChange:n=>{let t=e.find(e=>e.name===i);t&&(t.color=n),l([...e])}})},{field:"name",headerName:"Name",width:(0,s.measureGridWidth)(e.map(e=>e.name))},...Object.keys(Z).map(l=>({field:l,renderCell:({value:e})=>(0,t.jsx)("div",{className:o.cell,children:(0,t.jsx)(u.SanitizedHTML,{html:(0,s.getStr)(e)})}),width:(0,s.measureGridWidth)(e.map(e=>`${e[l]}`))}))],sortModel:[],onSortModelChange:n=>{let t=n[0],i=(N.idx+1)%2,o=t.field||N.field;T({idx:i,field:o}),l(o?[...e].sort((e,l)=>{let n=(0,s.getStr)(e[o]),t=(0,s.getStr)(l[o]);return 1===i?n.localeCompare(t):t.localeCompare(n)}):e)}})})]})};let v=(0,h.makeStyles)()({content:{minWidth:800},float:{float:"right"}});function S(){return(0,t.jsxs)(t.Fragment,{children:["Helpful tips",(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,t.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,t.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,t.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,t.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,t.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,t.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]})}function Z({model:e,handleClose:l}){let{classes:n}=v(),{sources:o}=e,[h,u]=(0,i.useState)(structuredClone(o||[])),[m,x]=(0,s.useLocalStorage)("multiwiggle-showTips",!1);return(0,t.jsxs)(r(),{open:!0,onClose:l,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[(0,t.jsxs)(a.Z,{className:n.content,children:[(0,t.jsx)(c.Z,{variant:"contained",className:n.float,onClick:()=>{x(!m)},children:m?"Hide tips":"Show tips"}),(0,t.jsx)("br",{}),m?(0,t.jsx)(S,{}):null,(0,t.jsx)(k,{rows:h,onChange:u,showTips:m})]}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(c.Z,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),u(e.sources||[])},children:"Clear custom settings"}),(0,t.jsx)(c.Z,{variant:"contained",color:"secondary",onClick:()=>{l(),u([...e.sources||[]])},children:"Cancel"}),(0,t.jsx)(c.Z,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(h),l()},children:"Submit"})]})]})}},24272:function(e,l,n){n.d(l,{A1:function(){return o},os:function(){return s},vi:function(){return r}});var t=n(87290),i=n(42382);function o(e,l,n=1){let t=l.map(l=>e.findIndex(e=>e.name===l)).sort((e,l)=>e-l),i=0;for(let l of t){let t=Math.max(i,l-n);t>=i&&e.splice(t,0,e.splice(l,1)[0]),i+=1}return e}function r(e,l,n=1){let t=l.map(l=>e.findIndex(e=>e.name===l)).sort((e,l)=>l-e),i=e.length-1;for(let l of t){let t=Math.min(i,l+n);t<=i&&e.splice(t,0,e.splice(l,1)[0]),i-=1}return e}function s(e){let{prefersOffset:l}=e,{trackLabels:n}=(0,i.getContainingView)(e),o=(0,i.getContainingTrack)(e),r=(0,t.getConf)(o,"name");return"overlapping"!==n||l?10:(0,i.measureText)(r,12.8)+100}}}]);